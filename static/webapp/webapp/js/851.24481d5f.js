"use strict";(self["webpackChunkspci"]=self["webpackChunkspci"]||[]).push([[851],{75851:(e,a,o)=>{o.r(a),o.d(a,{default:()=>ue});var t=o(83673);const r={key:0,class:"q-pa-md"},n=(0,t._)("div",{class:"text-h6"},[(0,t._)("b",null,"Gracias por Colaborar")],-1),i=(0,t.Uk)(" Estado de la entrega actualizado "),l={key:1},s={key:0,class:"q-pa-md"},d=(0,t._)("b",null,"Verificadores",-1),c=(0,t._)("b",null,"Productos",-1),u=(0,t._)("b",null,"Verificadores de mi equipo",-1),p=(0,t._)("b",null,"Productos de mi equipo",-1);function g(e,a,o,g,m,f){const b=(0,t.up)("q-avatar"),w=(0,t.up)("q-card-section"),v=(0,t.up)("q-btn"),h=(0,t.up)("q-separator"),E=(0,t.up)("q-card"),_=(0,t.up)("q-tab"),q=(0,t.up)("q-tabs"),W=(0,t.up)("PanelBandejaEntrega"),k=(0,t.up)("q-tab-panel"),y=(0,t.up)("q-tab-panels"),z=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(z,null,{default:(0,t.w5)((()=>[e.entrega.estadoWorkflow?((0,t.wg)(),(0,t.iD)("div",r,[(0,t.Wm)(E,{class:"my-card bg-teal-2"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{color:"white","text-color":"cyan-8",icon:"done"})])),_:1}),(0,t.Wm)(w,{class:"text-textoAzul"},{default:(0,t.w5)((()=>[n,i])),_:1})])),_:1}),(0,t.Wm)(w,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{color:"light-blue-10",label:"Volver a la bandeja de entregas",onClick:e.limpiaBandeja},null,8,["onClick"])])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"bg-textoAzul",inset:""})])),_:1})])),_:1})])):((0,t.wg)(),(0,t.iD)("div",l,[e.usuario.perfil?((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,{"model-value":e.tab,"onUpdate:modelValue":e.cambiaTab,dense:"",class:"tablaAcciones","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{name:"misVerificadores",class:"text-textoAzul"},{default:(0,t.w5)((()=>[d])),_:1}),(0,t.Wm)(_,{name:"misProductos",class:"text-textoAzul"},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(_,{name:"verificadoresSinMI",class:"text-textoAzul"},{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(_,{name:"productosSinMI",class:"text-textoAzul"},{default:(0,t.w5)((()=>[p])),_:1})])),_:1},8,["model-value","onUpdate:modelValue"]),(0,t.Wm)(h),(0,t.Wm)(y,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tab=a),animated:""},{default:(0,t.w5)((()=>[e.verificador.verificadores?((0,t.wg)(),(0,t.j4)(k,{key:0,name:"misVerificadores",class:"q-pa-none tablaAcciones"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{entregas:e.verificador.verificadores,usuario:e.usuario,tipoEntrega:"verificador"},null,8,["entregas","usuario"])])),_:1})):(0,t.kq)("",!0),e.producto.productos?((0,t.wg)(),(0,t.j4)(k,{key:1,name:"misProductos",class:"q-pa-none tablaAcciones"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{entregas:e.producto.productos,usuario:e.usuario,tipoEntrega:"producto"},null,8,["entregas","usuario"])])),_:1})):(0,t.kq)("",!0),e.verificador.verificadores?((0,t.wg)(),(0,t.j4)(k,{key:2,name:"verificadoresSinMI",class:"q-pa-none tablaAcciones"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{entregas:e.verificador.verificadores,usuario:e.usuario,tipoEntrega:"verificador"},null,8,["entregas","usuario"])])),_:1})):(0,t.kq)("",!0),e.producto.productos?((0,t.wg)(),(0,t.j4)(k,{key:3,name:"productosSinMI",class:"q-pa-none tablaAcciones"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{entregas:e.producto.productos,usuario:e.usuario,tipoEntrega:"producto"},null,8,["entregas","usuario"])])),_:1})):(0,t.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})])):(0,t.kq)("",!0)]))])),_:1})}var m=o(61959),f=o(93617),b=o(62323);function w(e,a,o,r,n,i){const l=(0,t.up)("q-avatar"),s=(0,t.up)("q-tab"),d=(0,t.up)("q-tabs"),c=(0,t.up)("TablaEntregasColaborador"),u=(0,t.up)("q-tab-panel"),p=(0,t.up)("q-tab-panels"),g=(0,t.up)("q-splitter");return(0,t.wg)(),(0,t.j4)(g,{modelValue:e.splitterModel,"onUpdate:modelValue":a[2]||(a[2]=a=>e.splitterModel=a),style:{height:"500px"}},{before:(0,t.w5)((()=>[(0,t.Wm)(d,{"no-caps":"",modelValue:e.innerTab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.innerTab=a),vertical:"",class:"tablaAcciones q-pa-sm","active-color":"primary","indicator-color":"primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"borrador"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"md",color:"cyan-10","text-color":"white",icon:"drive_file_rename_outline"}),(0,t.Uk)(" Borrador ("+(0,b.zw)(e.entregas.borradores.length)+") ",1)])),_:1}),(0,t.Wm)(s,{name:"enviadoLider"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"md",color:"cyan-10","text-color":"white",icon:"supervisor_account"}),(0,t.Uk)(" Enviado a líder ("+(0,b.zw)(e.entregas.enviados_Lider.length)+") ",1)])),_:1}),(0,t.Wm)(s,{name:"rechazadoLider"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"md",color:"cyan-10","text-color":"white",icon:"warning"}),(0,t.Uk)(" Rechazado (líder) ("+(0,b.zw)(e.entregas.rechazados_Lider.length)+") ",1)])),_:1}),(0,t.Wm)(s,{name:"enviadoUPCI"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"md",color:"cyan-10","text-color":"white",icon:"woman"}),(0,t.Uk)(" Enviado a UPCI ("+(0,b.zw)(e.entregas.enviados_UPCI.length)+") ",1)])),_:1}),(0,t.Wm)(s,{name:"rechazadoUPCI"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"md",color:"cyan-10","text-color":"white",icon:"error"}),(0,t.Uk)(" Rechazado (UPCI) ("+(0,b.zw)(e.entregas.rechazados_UPCI.length)+") ",1)])),_:1}),(0,t.Wm)(s,{name:"finalizado"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"md",color:"cyan-10","text-color":"white",icon:"self_improvement"}),(0,t.Uk)(" Finalizado ("+(0,b.zw)(e.entregas.finalizados.length)+") ",1)])),_:1})])),_:1},8,["modelValue"])])),after:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:e.innerTab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.innerTab=a),animated:"","transition-prev":"slide-down","transition-next":"slide-up",class:"tablaAcciones"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{name:"borrador"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{entregas:e.entregas.borradores,usuario:e.usuario,tipoEntrega:e.tipoEntrega},null,8,["entregas","usuario","tipoEntrega"])])),_:1}),(0,t.Wm)(u,{name:"enviadoLider"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{entregas:e.entregas.enviados_Lider,usuario:e.usuario,tipoEntrega:e.tipoEntrega},null,8,["entregas","usuario","tipoEntrega"])])),_:1}),(0,t.Wm)(u,{name:"rechazadoLider"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{entregas:e.entregas.rechazados_Lider,usuario:e.usuario,tipoEntrega:e.tipoEntrega},null,8,["entregas","usuario","tipoEntrega"])])),_:1}),(0,t.Wm)(u,{name:"enviadoUPCI"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{entregas:e.entregas.enviados_UPCI,usuario:e.usuario,tipoEntrega:e.tipoEntrega},null,8,["entregas","usuario","tipoEntrega"])])),_:1}),(0,t.Wm)(u,{name:"rechazadoUPCI"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{entregas:e.entregas.rechazados_UPCI,usuario:e.usuario,tipoEntrega:e.tipoEntrega},null,8,["entregas","usuario","tipoEntrega"])])),_:1}),(0,t.Wm)(u,{name:"finalizado"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{entregas:e.entregas.finalizados,usuario:e.usuario,tipoEntrega:e.tipoEntrega},null,8,["entregas","usuario","tipoEntrega"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])}const v={key:0},h={key:0},E={class:"q-pa-sm"},_=["href"],q={key:0},W={key:0},k={key:0},y={class:"text-subtitle1"},z={key:0,class:"text-h6 q-mb-md text-textoAzul"},V=(0,t.Uk)(" Acción "),j=(0,t._)("b",null," Sin archivos adjuntos",-1),P=(0,t.Uk)(". "),U=[V,j,P],Z={key:0,class:"row justify-end q-gutter-sm q-ma-md"};function A(e,a,o,r,n,i){const l=(0,t.up)("q-td"),s=(0,t.up)("q-tooltip"),d=(0,t.up)("q-table"),c=(0,t.up)("q-btn"),u=(0,t.up)("BotonSecundarioEntregas"),p=(0,t.up)("BotonEdicionEntregas"),g=(0,t.up)("BotonPrincipalEntregas");return e.entregas?((0,t.wg)(),(0,t.iD)("div",v,[(0,t.Wm)(d,{flat:"",class:"tablaAcciones",rows:e.entregas,columns:"verificador"==e.tipoEntrega?e.columnasVerificador:e.columnasProducto,"row-key":"id",selection:"single",selected:e.entregaSeleccionada,"onUpdate:selected":a[0]||(a[0]=a=>e.entregaSeleccionada=a),"no-data-label":"No hay verificadores para el filtro aplicado"},{"body-cell-adjuntos":(0,t.w5)((e=>[(0,t.Wm)(l,{props:e},{default:(0,t.w5)((()=>[e.value?((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("ul",E,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.value.slice(0,5),(e=>((0,t.wg)(),(0,t.iD)("li",{key:e.id},[(0,t._)("a",{target:"_blank",href:e.downloadUrl},(0,b.zw)(e.name),9,_)])))),128)),e.value.length>5?((0,t.wg)(),(0,t.iD)("div",q,"...")):(0,t.kq)("",!0)])])):(0,t.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-accion":(0,t.w5)((e=>[(0,t.Wm)(l,{props:e},{default:(0,t.w5)((()=>[e.value?((0,t.wg)(),(0,t.iD)("div",W,[(0,t.Uk)((0,b.zw)(e.value.id_uaysen)+" ",1),(0,t.Wm)(s,{class:"text-body1"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,b.zw)(e.value.titulo),1)])),_:2},1024)])):(0,t.kq)("",!0)])),_:2},1032,["props"])])),top:(0,t.w5)((a=>[e.entregaSeleccionada.length?((0,t.wg)(),(0,t.iD)("div",k,[(0,t._)("div",y,[(0,t.Uk)((0,b.zw)(e.entregaSeleccionada[0].descripcion)+" ",1),e.adjuntos?((0,t.wg)(),(0,t.iD)("div",z,U)):(0,t.kq)("",!0)])])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","selected"]),e.entregaSeleccionada.length?((0,t.wg)(),(0,t.iD)("div",Z,[(0,t.Wm)(c,{color:"btnCancelar",label:"   Cancelar   ",onClick:a[1]||(a[1]=a=>e.entregaSeleccionada=[])}),(0,t.Wm)(u,{usuario:e.usuario,entrega:e.entregaSeleccionada[0],tipoEntrega:e.tipoEntrega},null,8,["usuario","entrega","tipoEntrega"]),(0,t.Wm)(p,{usuario:e.usuario,entrega:e.entregaSeleccionada[0],tipoEntrega:e.tipoEntrega},null,8,["usuario","entrega","tipoEntrega"]),(0,t.Wm)(g,{usuario:e.usuario,entrega:e.entregaSeleccionada[0],tipoEntrega:e.tipoEntrega,onAjuntosEntregas:e.getAdjuntos},null,8,["usuario","entrega","tipoEntrega","onAjuntosEntregas"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)}var x=o(64809),C=o(61399);function S(e,a,o,r,n,i){const l=(0,t.up)("q-btn");return e.seRenderea?((0,t.wg)(),(0,t.j4)(l,{key:0,label:e.etiqueta,color:"info",onClick:e.editaEntrega},null,8,["label","onClick"])):(0,t.kq)("",!0)}var T=o(79582);o(47083);const Q=(0,t.aZ)({props:{usuario:Object,entrega:Object,tipoEntrega:String},setup(e){const a=(0,f.oR)(),o=(0,T.tv)(),t=(0,m.iH)(!0),r=(e.entrega.usuario,(0,m.iH)("")),n=e.tipoEntrega,i=e.entrega,l=(0,m.iH)("");return"Borrador"!=e.entrega.estado&&"Rechazado por líder"!=e.entrega.estado&&"Rechazado por UPCI"!=e.entrega.estado||e.usuario.id!=e.entrega.usuario.id?t.value=!1:(r.value=" Editar Entrega ",e.entrega&&(l.value="colabEdita")),{etiqueta:r,seRenderea:t,entrega:i,tipoEntrega:n,editaEntrega:()=>{a.dispatch("entrega/setEntregaAModificar",{entrega:e.entrega}),"verificador"===n?o.push("editaVerificador"):o.push("editaProducto")}}}});var I=o(74260),M=o(48240),B=o(7518),D=o.n(B);const H=(0,I.Z)(Q,[["render",S]]),F=H;D()(Q,"components",{QBtn:M.Z});const L=(0,t.aZ)({components:{BotonPrincipalEntregas:x.Z,BotonSecundarioEntregas:C.Z,BotonEdicionEntregas:F},props:{entregas:Array,usuario:Object,tipoEntrega:String},setup(e){const a=(0,m.iH)(!1),o=e=>{a.value=e};return{getAdjuntos:o,adjuntos:a,entregas:(0,m.Vh)(e,"entregas"),tipoEntrega:(0,m.Vh)(e,"tipoEntrega"),entregaSeleccionada:(0,m.iH)([]),columnasProducto:[{name:"descripcion",label:"Descripción",field:"descripcion",align:"left",style:"white-space: normal"},{name:"colaborador",label:"Colaborador",field:e=>e.usuario.first_name+" "+e.usuario.last_name,align:"left"},{name:"mdv",label:"Medio de Verificación",field:e=>e.mdv.nombre,align:"left",style:"white-space: normal"},{name:"accion",label:"Acción",field:e=>e.mdv.accion,align:"left"},{name:"accionTipo",label:"Tipo acción",field:e=>e.mdv.accion.tipo,align:"left",sortable:!0},{name:"adjuntos",label:"Adjuntos",field:"adjuntos",align:"left"},{name:"estado",label:"Estado",field:"estado",align:"left",sortable:!0},{name:"fecha",label:"Fecha",field:"fecha_creacion",align:"left",sortable:!0}],columnasVerificador:[{name:"descripcion",label:"Descripción",field:"descripcion",align:"left",style:"white-space: normal"},{name:"colaborador",label:"Colaborador",field:e=>e.usuario.first_name+" "+e.usuario.last_name,align:"left"},{name:"indicador",label:"Indicador",field:e=>e.indicador.nombre,align:"left",style:"white-space: normal"},{name:"funcion",label:"Función",field:e=>e.indicador.funcion.nombre,align:"left",style:"white-space: normal"},{name:"accion",label:"Acción",field:e=>e.indicador.funcion.accion,align:"left",style:"white-space: normal"},{name:"adjuntos",label:"Adjuntos",field:"adjuntos",align:"left"},{name:"estado",label:"Estado",field:"estado",align:"left",sortable:!0},{name:"fecha",label:"Fecha",field:"fecha_creacion",align:"left",sortable:!0}]}}});var R=o(82138),O=o(83884),G=o(5363);const K=(0,I.Z)(L,[["render",A]]),N=K;D()(L,"components",{QTable:R.Z,QTd:O.Z,QTooltip:G.Z,QBtn:M.Z});const Y=(0,t.aZ)({components:{TablaEntregasColaborador:N},props:{entregas:Object,tipoEntrega:String,usuario:Object},setup(e){const a=(0,m.iH)("borrador");return{entregas:(0,m.Vh)(e,"entregas"),nombrePanel:(0,m.Vh)(e,"nombrePanel"),tipoEntrega:(0,m.Vh)(e,"tipoEntrega"),splitterModel:(0,m.iH)(15),innerTab:a}}});var J=o(80218),X=o(57547),$=o(3269),ee=o(75096),ae=o(5906),oe=o(86602);const te=(0,I.Z)(Y,[["render",w]]),re=te;D()(Y,"components",{QSplitter:J.Z,QTabs:X.Z,QTab:$.Z,QAvatar:ee.Z,QTabPanels:ae.Z,QTabPanel:oe.Z});const ne=(0,t.aZ)({components:{PanelBandejaEntrega:re},setup(){const e=(0,f.oR)(),a=(0,t.Fl)((()=>e.state.usuarix.usuario)),o=(0,t.Fl)((()=>e.state.entrega)),r=(0,t.Fl)((()=>e.state.producto)),n=(0,t.Fl)((()=>e.state.verificador)),i=(0,m.iH)("misVerificadores"),l=(0,m.iH)("borrador"),s=(a,o)=>{e.dispatch("accion/limpiaAcciones"),"misProductos"==a?e.dispatch("producto/reqMisProductos"):"misVerificadores"==a?e.dispatch("verificador/reqMisVerificadores"):"productosSinMI"==a?e.dispatch("producto/reqProductosUnidad"):"verificadoresSinMI"==a&&e.dispatch("verificador/reqVerificadoresUnidad"),i.value=a,l.value="borrador"};return(0,t.bv)((()=>{e.dispatch("entrega/limpiaEntregas"),e.dispatch("verificador/reqMisVerificadores")})),{usuario:a,entrega:o,opcionEntregables:(0,m.iH)("reqEntregablesMios"),producto:r,verificador:n,limpiaBandeja:()=>{i.value="misProductos",l.value="borrador",e.dispatch("entrega/limpiaEntregas"),e.dispatch("verificador/reqMisVerificadores")},cambiaTab:s,tab:i,innerTab:l}}});var ie=o(24379),le=o(10151),se=o(25589),de=o(65869);const ce=(0,I.Z)(ne,[["render",g]]),ue=ce;D()(ne,"components",{QPage:ie.Z,QCard:le.Z,QCardSection:se.Z,QAvatar:ee.Z,QBtn:M.Z,QSeparator:de.Z,QTabs:X.Z,QTab:$.Z,QTabPanels:ae.Z,QTabPanel:oe.Z})}}]);