"use strict";(self["webpackChunkspci"]=self["webpackChunkspci"]||[]).push([[338],{24338:(e,o,a)=>{a.r(o),a.d(o,{default:()=>Ue});var t=a(83673),i=a(62323);const l=e=>((0,t.dD)("data-v-8821aff4"),e=e(),(0,t.Cn)(),e),n=l((()=>(0,t._)("div",{title:"header"},[(0,t._)("p",{align:"center",style:{"margin-bottom":"1,0cm","line-height":"30%"}},[(0,t._)("img",{id:"logo",src:"/static/uaysen-nuevo-1.png",name:"image1.jpg",align:"bottom",width:"70",height:"90",border:"0"})])],-1))),c=l((()=>(0,t._)("div",null,[(0,t._)("p",{align:"center",style:{"margin-bottom":"0.2cm","line-height":"40%"}},[(0,t._)("b",null,"REPORTE MEDIOS DE VERIFICACIÓN")])],-1))),r={align:"center",style:{"margin-bottom":"0.2cm","line-height":"108%"}},u={align:"center",style:{"margin-bottom":"0cm","line-height":"90%","page-break-before":"auto"}},s=l((()=>(0,t._)("br",null,null,-1))),d=l((()=>(0,t._)("br",null,null,-1))),p={align:"center"},m=l((()=>(0,t._)("b",{style:{"font-size":"11pt","text-align":"center"}},"Título Acción",-1))),v=l((()=>(0,t._)("b",{style:{"text-align":"center"}},"Identificador Acción",-1))),_=l((()=>(0,t._)("b",null,"Unidad Responsable",-1))),h=l((()=>(0,t._)("br",null,null,-1))),f=l((()=>(0,t._)("br",null,null,-1))),b=l((()=>(0,t._)("br",null,null,-1))),g={key:0,align:"center"},R={key:1,align:"center"},A={key:2,align:"center"},w=l((()=>(0,t._)("br",null,null,-1))),W={align:"center",style:{height:"auto"}},y=l((()=>(0,t._)("b",null,"Analista",-1))),q={align:"left"},F=l((()=>(0,t._)("b",null,"Recomendaciones",-1))),H=l((()=>(0,t._)("br",null,null,-1))),V={class:"row justify-end q-gutter-sm q-ma-md",style:{width:"65%"}},k=l((()=>(0,t._)("br",null,null,-1)));function z(e,o,a,l,z,C){const j=(0,t.up)("q-item-label"),x=(0,t.up)("q-separator"),Z=(0,t.up)("q-card-section"),Q=(0,t.up)("q-select"),P=(0,t.up)("q-card"),S=(0,t.up)("q-space"),D=(0,t.up)("ReporteFunciones"),E=(0,t.up)("ReporteHitos"),U=(0,t.up)("ReporteAcciones"),N=(0,t.up)("q-input"),B=(0,t.up)("BotonCancelarReporte"),I=(0,t.up)("q-btn");return e.dataReady?((0,t.wg)(),(0,t.j4)(P,{key:0,class:"my-card",align:"center",flat:"",bordered:""},{default:(0,t.w5)((()=>[n,c,(0,t._)("div",null,[(0,t._)("p",r,[(0,t._)("b",null,"Planificación Operativa Anual "+(0,i.zw)(e.anio),1)])]),(0,t._)("div",null,[(0,t._)("p",u,[(0,t._)("b",null,(0,i.zw)(e.mes),1)])]),s,d,e.finReporteAccion?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(Z,{key:0,"transition-prev":"slide-down","transition-next":"slide-up"},{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t.Wm)(P,{style:{width:"65%"},flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{horizontal:"",style:{height:"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"col-2 bg-blue-2",flat:"",bordered:"",style:{"padding-top":"5px"}},{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(x,{vertical:""}),(0,t.Wm)(j,{class:"col bg-deep-orange-1",flat:"",bordered:"",style:{"padding-top":"5px","padding-bottom":"5px"}},{default:(0,t.w5)((()=>[(0,t._)("b",null,(0,i.zw)(e.accionesAReportar.titulo),1)])),_:1})])),_:1}),(0,t.Wm)(x,{horizontal:""}),(0,t.Wm)(Z,{horizontal:"",style:{height:"55px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"col bg-blue-2",style:{"padding-top":"8px"}},{default:(0,t.w5)((()=>[v])),_:1}),(0,t.Wm)(x,{vertical:""}),(0,t.Wm)(j,{class:"col-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:e.model,"onUpdate:modelValue":[o[0]||(o[0]=o=>e.model=o),e.cambio],options:e.opciones,"emit-value":"","map-options":"","option-label":o=>null===o?"Null":e.getAccion(o.accion)},null,8,["modelValue","options","option-label","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(x,{vertical:""}),(0,t.Wm)(j,{class:"col-4 bg-blue-2",style:{"padding-top":"8px"}},{default:(0,t.w5)((()=>[_])),_:1}),(0,t.Wm)(x,{vertical:""}),(0,t.Wm)(j,{class:"col",style:{"padding-top":"8px"}},{default:(0,t.w5)((()=>[(0,t._)("b",null,(0,i.zw)(e.defineActor(e.accionesAReportar.rol_set)),1)])),_:1})])),_:1})])),_:1}),(0,t.Wm)(S),h,(0,t.Wm)(S),f,b,e.acciones.funciones.length?((0,t.wg)(),(0,t.iD)("div",g,[(0,t.Wm)(D,{identificador:e.accionesAReportar.id_uaysen,funciones:e.acciones.funciones,reporteAccion:e.model},null,8,["identificador","funciones","reporteAccion"])])):(0,t.kq)("",!0),e.validaReporteHito()?((0,t.wg)(),(0,t.iD)("div",R,[(0,t.Wm)(E,{identificador:e.accionesAReportar.id_uaysen,mdvs:e.acciones.detalleAccion.mdvs,reporteAccion:e.model},null,8,["identificador","mdvs","reporteAccion"])])):(0,t.kq)("",!0),e.validaReporteAccion()?((0,t.wg)(),(0,t.iD)("div",A,[(0,t.Wm)(U,{opcionesJustificacion:e.opcionesJustificacion,fechaFormateada:e.fechaFormateada,reporteAccion:e.model,onCambioReporteAccion:e.cambioReporteAccion,onFinReporte:e.finReporte},null,8,["opcionesJustificacion","fechaFormateada","reporteAccion","onCambioReporteAccion","onFinReporte"])])):(0,t.kq)("",!0),(0,t.Wm)(S),w])])),_:1})),e.finReporteAccion?((0,t.wg)(),(0,t.j4)(Z,{key:1,"transition-prev":"slide-down","transition-next":"slide-up"},{default:(0,t.w5)((()=>[(0,t._)("div",W,[(0,t.Wm)(P,{style:{width:"65%"},flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{horizontal:"",style:{height:"30px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"col-3 bg-blue-2",flat:"",bordered:"",style:{"padding-top":"5px"}},{default:(0,t.w5)((()=>[y])),_:1}),(0,t.Wm)(x,{vertical:""}),(0,t.Wm)(j,{class:"col-6",flat:"",bordered:"",style:{"padding-top":"5px","padding-left":"3px"}},{default:(0,t.w5)((()=>[(0,t._)("div",q,(0,i.zw)(e.usuario.nombre)+" "+(0,i.zw)(e.usuario.apellido),1)])),_:1})])),_:1}),(0,t.Wm)(x,{horizontal:""}),(0,t.Wm)(Z,{horizontal:"",style:{height:"auto",width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"col-3 bg-blue-2",flat:"",bordered:"",style:{"padding-top":"20px"}},{default:(0,t.w5)((()=>[F])),_:1}),(0,t.Wm)(x,{vertical:""}),(0,t.Wm)(j,{class:"col-9"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{modelValue:e.recomendacion,"onUpdate:modelValue":o[1]||(o[1]=o=>e.recomendacion=o),style:{"padding-left":"3px"},type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})]),H,(0,t.Wm)(x,{inset:"",style:{width:"65%"}}),(0,t._)("div",V,[(0,t.Wm)(B,{opcion:"reporte",onGuardarAvance:e.guardarAvance},null,8,["onGuardarAvance"]),(0,t.Wm)(I,{color:"btnVolver",onClick:e.cambioAtras,label:" Volver ",class:"q-ml-sm"},null,8,["onClick"]),(0,t.Wm)(I,{class:"q-ml-sm",color:"btnContinuar",label:"   Guardar Borrador  ",onClick:e.guardarReporte},null,8,["onClick"]),(0,t.Wm)(I,{class:"q-ml-sm",color:"btnAdjuntar",label:"   Finalizar  ",onClick:e.guardarReporteFinal},null,8,["onClick"])])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(S),k])),_:1})):(0,t.kq)("",!0)}var C=a(61959),j=a(93617),x=a(28339);const Z={align:"center"},Q=(0,t._)("div",{class:"q-pa-md q-gutter-sm",style:{width:"65%"}},[(0,t._)("p",{align:"left"},[(0,t._)("b",null,"1.- Evaluación entrega a Medios de Verificación")])],-1),P=(0,t._)("b",null,"Función",-1),S=(0,t._)("b",null,"MDV",-1),D=(0,t._)("b",null,"Indicador de Avance",-1),E=(0,t._)("b",null,"Comentario al cumplimiento",-1),U=(0,t._)("br",null,null,-1),N=(0,t._)("br",null,null,-1),B={class:"row justify-end q-gutter-sm q-ma-md"},I=(0,t._)("br",null,null,-1);function M(e,o,a,l,n,c){const r=(0,t.up)("q-item-label"),u=(0,t.up)("q-separator"),s=(0,t.up)("q-card-section"),d=(0,t.up)("q-expansion-item"),p=(0,t.up)("q-input"),m=(0,t.up)("q-card"),v=(0,t.up)("q-space"),_=(0,t.up)("BotonCancelarReporte"),h=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",Z,[Q,(0,t.Wm)(m,{style:{width:"65%"},flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{horizontal:"",style:{height:"40px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col-1 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[P])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2 bg-deep-orange-1",flat:"",bordered:"",modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.idTactica),1)])),_:1},8,["modelValue"]),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col bg-deep-orange-1",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.descripcionTactica),1)])),_:1})])),_:1}),(0,t.Wm)(u,{horizontal:""}),(0,t.Wm)(s,{horizontal:"",style:{height:"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col-3 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[S])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-3 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[D])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[E])),_:1})])),_:1}),(0,t.Wm)(u,{horizontal:""}),(0,t.Wm)(s,{horizontal:"",style:{height:"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col-3",flat:"",bordered:"",modelValue:e.model,"onUpdate:modelValue":o[1]||(o[1]=o=>e.model=o)},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{"expand-icon-toggle":"","expand-separator":"",label:"Detalle MDVs",caption:e.identificador},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.funciones[e.pasoFuncion].indicador_set,(o=>((0,t.wg)(),(0,t.iD)("div",{key:o.id},(0,i.zw)(e.identificador)+"_"+(0,i.zw)(e.idTactica)+"_"+(0,i.zw)(o.nombre),1)))),128))])),_:1},8,["caption"])])),_:1},8,["modelValue"]),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-3",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:e.labelMetaAvance,"input-class":"text-right",modelValue:e.indicadorAvance,"onUpdate:modelValue":o[2]||(o[2]=o=>e.indicadorAvance=o),borderless:"",suffix:"%",readonly:""},null,8,["label","modelValue"])])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{style:{height:"auto"},modelValue:e.comentario_cumplimiento,"onUpdate:modelValue":o[3]||(o[3]=o=>e.comentario_cumplimiento=o),borderless:"",type:"textarea",label:"Ingresar comentario al cumplimiento"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(v),U,(0,t.Wm)(v),N,(0,t.Wm)(u,{inset:""}),(0,t._)("div",B,[(0,t.Wm)(_,{opcion:"funcion",onGuardarAvance:e.guardarAvance},null,8,["onGuardarAvance"]),e.validaPasoAtras()?((0,t.wg)(),(0,t.j4)(h,{key:0,color:"btnVolver",onClick:e.cambioAtras,label:" Función Anterior  ",class:"q-ml-sm"},null,8,["onClick"])):(0,t.kq)("",!0),e.validaPasoAdelante()?((0,t.wg)(),(0,t.j4)(h,{key:1,color:"btnContinuar",onClick:e.cambioAdelante,label:"   Siguiente Función   ",class:"q-ml-sm"},null,8,["onClick"])):(0,t.kq)("",!0),e.validaPasoAdelante()?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(h,{key:2,color:"btnContinuar",onClick:e.avanzaReporte,label:"   Siguiente   ",class:"q-ml-sm"},null,8,["onClick"]))]),(0,t.Wm)(v),I],64)}var L=a(39295);const T=(0,t.aZ)({components:{BotonCancelarReporte:L.Z},props:{identificador:String,funciones:Array,reporteAccion:Object},watch:{reporteAccion:async function(e,o){this.pasoFuncion=0,e.reporte_funciones.length?this.comentario_cumplimiento=e.reporte_funciones[0].comentario_cumplimiento:this.comentario_cumplimiento=""},funciones:function(e,o){this.funciones=e,this.descripcionTactica=this.funciones[0].nombre}},emits:["cambioFuncion"],setup(e,o){let{emit:a}=o;const i=(0,j.oR)(),l=(0,x.tv)(),n=(0,t.Fl)((()=>i.state.reporte)),c=(0,t.Fl)((()=>i.state.accion)),r=(0,C.iH)(e.funciones),u=(0,C.iH)(r.value[0].nombre),s=((0,C.iH)(),(0,C.iH)(),(0,C.iH)()),d=(0,t.Fl)((()=>i.state.verificador)),p=((0,C.iH)(""),(0,C.iH)("")),m=(0,C.iH)(0),v=()=>{const e=m.value+1;return m.value<10?"F0"+e.toString():"F"+e.toString()},_=()=>{var e;r.value[m.value].indicador_set.length,e=r.value[m.value].indicador_set[0].id,i.dispatch("verificador/reqVerificadorPorIndicador",e),i.dispatch("reporte/reqTotalMetasPorFuncion",r.value[m.value].indicador_set[0].funcion);let o=(0,t.Fl)((()=>i.state.reporte.total_meta)).value,a=(0,t.Fl)((()=>i.state.verificador.avance)).value;return a?(b.value="Meta ("+o+") / Avance ("+a+")",Math.floor(a/o*100)):(b.value="Meta ("+o+") / Avance (0)",Math.floor(0/o*100))},h=(0,t.Fl)(_),f=(0,t.Fl)(v),b=(0,C.iH)(""),g=(0,C.iH)(""),R=(0,C.iH)(r.value[0]),A=(0,t.Fl)({get:()=>{r.value=e.funciones}}),w=()=>m.value>0,W=()=>m.value<c.value.funciones.length-1,y=async()=>{const e={id_tactica:f.value,funcion:r.value[m.value].indicador_set[0].funcion,indicador:h.value,comentario_cumplimiento:p.value};await i.dispatch("reporte/actualizaNuevoReporteFuncion",e),m.value-=1,n.value.nuevoReporteFunciones.length?(p.value=n.value.nuevoReporteFunciones[m.value].comentario_cumplimiento,f.value=n.value.nuevoReporteFunciones[m.value].id_tactica):(p.value="",f.value=v()),u.value=r.value[m.value].nombre,h.value=_()},q=async()=>{const e={id_tactica:f.value,funcion:r.value[m.value].indicador_set[0].funcion,indicador:h.value,comentario_cumplimiento:p.value};await i.dispatch("reporte/actualizaNuevoReporteFuncion",e),m.value+=1,m.value<n.value.nuevoReporteFunciones.length?(p.value=n.value.nuevoReporteFunciones[m.value].comentario_cumplimiento,f.value=n.value.nuevoReporteFunciones[m.value].id_tactica):(p.value="",f.value=v()),u.value=r.value[m.value].nombre,h.value=_()},F=async()=>{const e={id_tactica:f.value,funcion:r.value[m.value].indicador_set[0].funcion,indicador:h.value,comentario_cumplimiento:p.value};await i.dispatch("reporte/actualizaNuevoReporteFuncion",e),i.dispatch("accion/limpiaFunciones")},H=async()=>{const e={id_tactica:f.value,funcion:r.value[m.value].indicador_set[0].funcion,indicador:h.value,comentario_cumplimiento:p.value};await i.dispatch("reporte/actualizaNuevoReporteFuncion",e),i.dispatch("reporte/postReporte",n.value.nuevoReporte),i.dispatch("reporte/limpiaReporteFunciones"),i.dispatch("reporte/limpiaReporteHitos"),i.dispatch("reporte/limpiaReporteAccion"),i.dispatch("reporte/reqReportesBorradores"),i.dispatch("reporte/reqReportesUpci"),l.push("panelReportesUpci")};return n.value.nuevoReporteFunciones.length&&(p.value=n.value.nuevoReporteFunciones[0].comentario_cumplimiento),{validaPasoAtras:w,validaPasoAdelante:W,cambioAtras:y,cambioAdelante:q,avanzaReporte:F,funciones:r,guardarAvance:H,idTactica:f,meta:(0,t.Fl)((()=>i.state.reporte.total_meta)),avance:(0,t.Fl)((()=>i.state.verificador.avance)),labelMetaAvance:b,indicadorAvance:h,entregas:d,pasoFuncion:m,nuevoReporte:n,comentario_cumplimiento:p,descripcionTactica:u,id_tactica:s,indicadores:R,identificador:(0,C.Vh)(e,"identificador"),model:A,mostrar:g,acciones:c}}});var J=a(74260),G=a(10151),O=a(25589),Y=a(2350),K=a(65869),$=a(60429),X=a(34842),ee=a(62025),oe=a(48240),ae=a(7518),te=a.n(ae);const ie=(0,J.Z)(T,[["render",M]]),le=ie;te()(T,"components",{QCard:G.Z,QCardSection:O.Z,QItemLabel:Y.Z,QSeparator:K.Z,QExpansionItem:$.Z,QInput:X.Z,QSpace:ee.Z,QBtn:oe.Z});const ne={align:"center"},ce=(0,t._)("div",{class:"q-pa-md q-gutter-sm",style:{width:"65%"}},[(0,t._)("p",{align:"left"},[(0,t._)("b",null,"1.- Evaluación entrega a Medios de Verificación")])],-1),re=(0,t._)("b",null,"Hito",-1),ue=(0,t._)("b",null,"MDV",-1),se=(0,t._)("b",null,"Logro",-1),de=(0,t._)("b",null,"Indicador de Logro",-1),pe=(0,t._)("b",null,"Comentario al cumplimiento",-1),me=(0,t._)("br",null,null,-1),ve=(0,t._)("br",null,null,-1),_e={class:"row justify-end q-gutter-sm q-ma-md"},he=(0,t._)("br",null,null,-1);function fe(e,o,a,l,n,c){const r=(0,t.up)("q-item-label"),u=(0,t.up)("q-separator"),s=(0,t.up)("q-card-section"),d=(0,t.up)("q-expansion-item"),p=(0,t.up)("q-input"),m=(0,t.up)("q-select"),v=(0,t.up)("q-card"),_=(0,t.up)("q-space"),h=(0,t.up)("BotonCancelarReporte"),f=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",ne,[ce,(0,t.Wm)(v,{style:{width:"65%"},flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{horizontal:"",style:{height:"40px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col-1 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[re])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2 bg-deep-orange-1",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.idTactica),1)])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col bg-deep-orange-1",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.descripcionTactica),1)])),_:1})])),_:1}),(0,t.Wm)(u,{horizontal:""}),(0,t.Wm)(s,{horizontal:"",style:{height:"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[ue])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[se])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[de])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[pe])),_:1})])),_:1}),(0,t.Wm)(u,{horizontal:""}),(0,t.Wm)(s,{horizontal:"",style:{"min-height":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col",flat:"",bordered:"",modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{"expand-icon-toggle":"","expand-separator":"",label:"Detalle MDVs",caption:e.identificador},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.acciones.detalleHitosAReporte,(o=>((0,t.wg)(),(0,t.iD)("div",{key:o.id,style:{"word-wrap":"break-word"}},(0,i.zw)(e.identificador)+"_"+(0,i.zw)(e.idTactica)+"_"+(0,i.zw)(o.label),1)))),128))])),_:1},8,["caption"])])),_:1},8,["modelValue"]),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{"input-class":"text-right",modelValue:e.porcentajeLogro,"onUpdate:modelValue":o[1]||(o[1]=o=>e.porcentajeLogro=o),borderless:"",suffix:"%",readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.indicadorLogro,"onUpdate:modelValue":o[2]||(o[2]=o=>e.indicadorLogro=o),options:e.opcionesLogro,label:"No logrado/Logrado con atraso/Logrado",style:{width:"100%"}},null,8,["modelValue","options"])])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{style:{height:"auto"},modelValue:e.comentario_cumplimiento,"onUpdate:modelValue":o[3]||(o[3]=o=>e.comentario_cumplimiento=o),borderless:"",type:"textarea",label:"Ingresar comentario al cumplimiento"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(_),me,(0,t.Wm)(_),ve,(0,t.Wm)(u,{inset:""}),(0,t._)("div",_e,[(0,t.Wm)(h,{opcion:"hito",onGuardarAvance:e.guardarAvance},null,8,["onGuardarAvance"]),e.validaPasoFuncionAtras()?((0,t.wg)(),(0,t.j4)(f,{key:0,color:"btnVolver",onClick:e.pasoAtras,label:" Volver a Funciones  ",class:"q-ml-sm"},null,8,["onClick"])):(0,t.kq)("",!0),e.validaPasoAtras()?((0,t.wg)(),(0,t.j4)(f,{key:1,color:"btnVolver",onClick:e.cambioAtras,label:" Hito Anterior  ",class:"q-ml-sm"},null,8,["onClick"])):(0,t.kq)("",!0),e.validaPasoAdelante()?((0,t.wg)(),(0,t.j4)(f,{key:2,color:"btnContinuar",onClick:e.cambioAdelante,label:"   Siguiente Hito   ",class:"q-ml-sm"},null,8,["onClick"])):(0,t.kq)("",!0),e.validaPasoAdelante()?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(f,{key:3,color:"btnContinuar",onClick:e.avanzaReporte,label:"   Siguiente   ",class:"q-ml-sm"},null,8,["onClick"]))]),(0,t.Wm)(_),he],64)}const be=(0,t.aZ)({components:{BotonCancelarReporte:L.Z},props:{identificador:String,mdvs:Array,reporteAccion:Object},watch:{reporteAccion:async function(e,o){this.pasoHito=0,e.reporte_hitos.length?this.comentario_cumplimiento=e.reporte_hitos[0].comentario_cumplimiento:this.comentario_cumplimiento=""},mdvs:function(e,o){this.mdvs=e,this.descripcionTactica=this.mdvs[0].label}},setup(e){const o=(0,j.oR)(),a=(0,x.tv)(),i=(0,C.iH)(""),l=(0,t.Fl)((()=>o.state.reporte)),n=(0,t.Fl)((()=>o.state.accion)),c=n.value.detalleAccion.hitos,r=(0,C.iH)(""),u=["No logrado","Logrado con atrasos","Logrado"],s=(0,t.Fl)((()=>o.state.producto.totalHitos)),d=(0,C.iH)(""),p=(0,C.iH)(e.identificador),m=(0,C.iH)(e.mdvs),v=(0,C.iH)(m.value[0].label),_=(0,C.iH)(0),h=(0,C.iH)(""),f=()=>{const e={idMdv:m.value[_.value].value,detalleProductos:s.value};return o.dispatch("accion/reqDetalleHitosAReporte",e),h.value=n.value.hitosAReporte,h.value.length?100:0},b=()=>{const e=_.value+1;return _.value<10?"H0"+e.toString():"H"+e.toString()},g=((0,C.iH)(),(0,t.Fl)(b)),R=(0,t.Fl)(f),A=(0,t.Fl)({get:()=>{m.value=e.mdvs}}),w=()=>_.value>0,W=()=>_.value<n.value.detalleAccion.mdvs.length-1,y=async()=>{const e={mdv:m.value[_.value].value,hitos:h.value,id_tactica:g.value,indicador:R.value,indicador_logro:r.value,comentario_cumplimiento:d.value};await o.dispatch("reporte/actualizaNuevoReporteHito",e),_.value-=1,l.value.nuevoReporteHitos.length?(d.value=l.value.nuevoReporteHitos[_.value].comentario_cumplimiento,r.value=l.value.nuevoReporteHitos[_.value].indicador_logro,g.value=l.value.nuevoReporteHitos[_.value].id_tactica):(r.value="",d.value="",g.value=b()),v.value=m.value[_.value].label,R.value=f()},q=async()=>{const e={mdv:m.value[_.value].value,hitos:h.value,id_tactica:g.value,indicador:R.value,indicador_logro:r.value,comentario_cumplimiento:d.value};await o.dispatch("reporte/actualizaNuevoReporteHito",e),_.value+=1,_.value<l.value.nuevoReporteHitos.length?(d.value=l.value.nuevoReporteHitos[_.value].comentario_cumplimiento,r.value=l.value.nuevoReporteHitos[_.value].indicador_logro,g.value=l.value.nuevoReporteHitos[_.value].id_tactica):(r.value="",d.value="",g.value=b()),v.value=m.value[_.value].label,R.value=f()},F=async()=>{const e={mdv:m.value[_.value].value,hitos:h.value,id_tactica:g.value,indicador:R.value,indicador_logro:r.value,comentario_cumplimiento:d.value};await o.dispatch("reporte/actualizaNuevoReporteHito",e),o.dispatch("accion/limpiaDetalleAccion")},H=async()=>{const a={mdv:m.value[_.value].value,hitos:h.value,id_tactica:g.value,indicador:R.value,indicador_logro:r.value,comentario_cumplimiento:d.value};await o.dispatch("reporte/actualizaNuevoReporteHito",a),o.dispatch("accion/reqFuncionesPorAccion",e.reporteAccion.accion)},V=()=>!(!l.value.nuevoReporteFunciones.length||0!==_.value),k=async()=>{const e={mdv:m.value[_.value].value,hitos:h.value,id_tactica:g.value,indicador:R.value,indicador_logro:r.value,comentario_cumplimiento:d.value};await o.dispatch("reporte/actualizaNuevoReporteHito",e),o.dispatch("reporte/postReporte",l.value.nuevoReporte),o.dispatch("reporte/limpiaReporteFunciones"),o.dispatch("reporte/limpiaReporteHitos"),o.dispatch("reporte/limpiaReporteAccion"),o.dispatch("reporte/reqReportesBorradores"),o.dispatch("reporte/reqReportesUpci"),a.push("panelReportesUpci")};return l.value.nuevoReporteHitos.length&&(d.value=l.value.nuevoReporteHitos[0].comentario_cumplimiento,r.value=l.value.nuevoReporteHitos[0].indicador_logro),{validaPasoAtras:w,validaPasoAdelante:W,pasoAtras:H,validaPasoFuncionAtras:V,cambioAtras:y,cambioAdelante:q,avanzaReporte:F,nuevoReporte:l,guardarAvance:k,idTactica:g,arrayIdHitosReporte:h,acciones:n,hitosIngresados:c,detalleProductos:s,mdvs:m,id_tactica:(0,C.Vh)(e,"stepPasoHito"),porcentajeLogro:R,porcentaje:i,pasoHito:_,model:A,indicadorLogro:r,comentario_cumplimiento:d,opcionesLogro:u,descripcionTactica:v,identificador:p}}});var ge=a(67208);const Re=(0,J.Z)(be,[["render",fe]]),Ae=Re;te()(be,"components",{QCard:G.Z,QCardSection:O.Z,QItemLabel:Y.Z,QSeparator:K.Z,QExpansionItem:$.Z,QInput:X.Z,QSelect:ge.Z,QSpace:ee.Z,QBtn:oe.Z});const we={align:"center"},We=(0,t._)("p",{align:"left"},[(0,t._)("b",{style:{"padding-left":"20px"}}," 2.- Evaluación Final ")],-1),ye={align:"center"},qe=(0,t._)("b",null,"Estado de Ejecución",-1),Fe={style:{height:"1px"}},He=(0,t._)("b",null,"Presenta justificación por contingencia",-1),Ve={class:"q-gutter-sm",style:{"max-width":"300px"}},ke=(0,t._)("b",null,"Fecha Entrega reporte",-1),ze=(0,t._)("br",null,null,-1),Ce={class:"row justify-end q-gutter-sm q-ma-md"},je=(0,t._)("br",null,null,-1);function xe(e,o,a,l,n,c){const r=(0,t.up)("q-item-label"),u=(0,t.up)("q-separator"),s=(0,t.up)("q-select"),d=(0,t.up)("q-card-section"),p=(0,t.up)("q-item-section"),m=(0,t.up)("q-input"),v=(0,t.up)("q-space"),_=(0,t.up)("BotonCancelarReporte"),h=(0,t.up)("q-btn"),f=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",we,[(0,t.Wm)(f,{style:{width:"65%"},flat:""},{default:(0,t.w5)((()=>[We,(0,t._)("div",ye,[(0,t.Wm)(d,{horizontal:"",style:{height:"55px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col-3 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[qe])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2",flat:"",bordered:"",style:{height:"25px"}},{default:(0,t.w5)((()=>[(0,t._)("div",Fe,[(0,t.Wm)(s,{modelValue:e.indicadorEstadoEjecucion,"onUpdate:modelValue":o[0]||(o[0]=o=>e.indicadorEstadoEjecucion=o),options:e.opcionesJustificacion,style:{width:"450%"}},null,8,["modelValue","options"])])])),_:1})])),_:1}),(0,t.Wm)(u,{horizontal:""}),(0,t.Wm)(d,{horizontal:"",style:{height:"75px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"col-3 bg-blue-2",flat:"",bordered:"",style:{"padding-top":"4px"}},{default:(0,t.w5)((()=>[He])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(p,{class:"col-1",style:{"padding-top":"19px","padding-left":"2px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.justificacion,"onUpdate:modelValue":o[1]||(o[1]=o=>e.justificacion=o),options:e.opcionesEjecucion,style:{width:"100%"}},null,8,["modelValue","options"])])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(p,{class:"col-4",style:{height:"75px","padding-top":"19px","padding-left":"2px"}},{default:(0,t.w5)((()=>[(0,t._)("div",Ve,[(0,t.Wm)(m,{modelValue:e.reporteJustificacion,"onUpdate:modelValue":o[2]||(o[2]=o=>e.reporteJustificacion=o),autogrow:"",type:"textarea"},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2 bg-blue-2",flat:"",bordered:""},{default:(0,t.w5)((()=>[ke])),_:1}),(0,t.Wm)(u,{vertical:""}),(0,t.Wm)(r,{class:"col-2",flat:"",bordered:"",modelValue:e.model,"onUpdate:modelValue":o[3]||(o[3]=o=>e.model=o)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.fechaFormateada),1)])),_:1},8,["modelValue"])])),_:1})]),(0,t.Wm)(v),ze,(0,t.Wm)(u,{inset:""}),(0,t._)("div",Ce,[(0,t.Wm)(_,{opcion:"accion",onGuardarAvance:e.guardarAvance},null,8,["onGuardarAvance"]),e.validaLabelBoton()?((0,t.wg)(),(0,t.j4)(h,{key:0,color:"btnVolver",onClick:e.cambioAtras,label:e.labelBotonAtras,class:"q-ml-sm"},null,8,["onClick","label"])):(0,t.kq)("",!0),(0,t.Wm)(h,{color:"btnContinuar",onClick:e.cambioAdelante,label:"   Continuar    ",class:"q-ml-sm"},null,8,["onClick"])]),(0,t.Wm)(v),je])),_:1})])}const Ze=(0,t.aZ)({components:{BotonCancelarReporte:L.Z},props:{opcionesJustificacion:Array,fechaFormateada:String,reporteAccion:Object},watch:{reporteAccion:async function(e,o){const a={accion:o.accion,estado_ejecucion:this.indicadorEstadoEjecucion,justificacion_contingencia:this.justificacion,reporte_justificacion_contingencia:this.reporteJustificacion,reporte_funciones:o.reporte_funciones,reporte_hitos:o.reporte_hitos};await this.$store.dispatch("reporte/actualizaNuevoReporteAccion",a)}},emits:["cambioReporteAccion","finReporte"],setup(e,o){let{emit:a}=o;const i=(0,j.oR)(),l=(0,x.tv)(),n=(0,t.Fl)((()=>i.state.accion)),c=(0,t.Fl)((()=>i.state.accion.aReportar.acciones)),r=(0,t.Fl)((()=>i.state.reporte)),u=["Si","No"],s=(0,C.iH)("Atras"),d=(0,C.iH)(e.reporteAccion.estado_ejecucion),p=(0,C.iH)(e.reporteAccion.reporte_justificacion_contingencia),m=(0,C.iH)(e.reporteAccion.justificacion_contingencia),v=(0,C.iH)(e.reporteAccion.accion),_=(0,t.Fl)({get:()=>{v.value=e.reporteAccion.accion}}),h=async()=>{const e={accion:v.value,estado_ejecucion:d.value,justificacion_contingencia:m.value,reporte_justificacion_contingencia:p.value,reporte_funciones:r.value.nuevoReporteFunciones,reporte_hitos:r.value.nuevoReporteHitos};await i.dispatch("reporte/actualizaNuevoReporteAccion",e),a("finReporte",!0)},f=async()=>{const e={accion:v.value,estado_ejecucion:d.value,justificacion_contingencia:m.value,reporte_justificacion_contingencia:p.value,reporte_funciones:r.value.nuevoReporteFunciones,reporte_hitos:r.value.nuevoReporteHitos};await i.dispatch("reporte/actualizaNuevoReporteAccion",e),i.dispatch("accion/reqDetalleAccion",v.value),i.dispatch("accion/reqFuncionesPorAccion",v.value),i.dispatch("accion/reqMdvFuncionesEHitosPorAccion",v.value),i.dispatch("producto/reqHitosReporte",v.value),i.dispatch("reporte/setNuevoReporteHito",r.value.nuevoReporteHitos),i.dispatch("reporte/setNuevoReporteFuncion",r.value.nuevoReporteFunciones),a("cambioReporteAccion",e)},b=()=>(e.reporteAccion.reporte_funciones.length&&e.reporteAccion.reporte_hitos.length?s.value="Volver a Funciones e Hitos":e.reporteAccion.reporte_funciones.length&&!e.reporteAccion.reporte_hitos.length?s.value="Volver a Funciones":s.value="Volver a Hitos",!0),g=async()=>{const e={accion:v.value,estado_ejecucion:d.value,justificacion_contingencia:m.value,reporte_justificacion_contingencia:p.value,reporte_funciones:r.value.nuevoReporteFunciones,reporte_hitos:r.value.nuevoReporteHitos};await i.dispatch("reporte/actualizaNuevoReporteAccion",e),i.dispatch("reporte/postReporte",r.value.nuevoReporte),i.dispatch("reporte/limpiaReporteFunciones"),i.dispatch("reporte/limpiaReporteHitos"),i.dispatch("reporte/limpiaReporteAccion"),i.dispatch("reporte/reqReportesBorradores"),i.dispatch("reporte/reqReportesUpci"),l.push("panelReportesUpci")};return{nuevoReporte:r,labelBotonAtras:s,model:_,cambioAdelante:h,cambioAtras:f,validaLabelBoton:b,guardarAvance:g,accionesAReportar:c,idAccion:v,accion:n,opcionesJustificacion:(0,C.Vh)(e,"opcionesJustificacion"),opcionesEjecucion:u,justificacion:m,indicadorEstadoEjecucion:d,reporteJustificacion:p,fechaFormateada:(0,C.Vh)(e,"fechaFormateada")}}});var Qe=a(52035);const Pe=(0,J.Z)(Ze,[["render",xe]]),Se=Pe;te()(Ze,"components",{QCard:G.Z,QCardSection:O.Z,QItemLabel:Y.Z,QSeparator:K.Z,QSelect:ge.Z,QItemSection:Qe.Z,QInput:X.Z,QSpace:ee.Z,QBtn:oe.Z});const De=(0,t.aZ)({components:{ReporteFunciones:le,ReporteHitos:Ae,ReporteAcciones:Se,BotonCancelarReporte:L.Z},props:{usuario:Object,entrega:Object,tipoEntrega:String},methods:{detalleAccion(e){return 1},defineActor(e){return e[0].actor.id_uaysen},validaReporteHito(){return!(this.acciones.funciones.length||!this.acciones.detalleAccion||!this.acciones.detalleAccion.mdvs.length)},validaReporteAccion(){return!(this.acciones.funciones.length||this.acciones.detalleAccion&&this.acciones.detalleAccion.mdvs.length)},validaFinReporte(){return!this.stepPasoAccion}},setup(){const e=(0,j.oR)(),o=(0,x.tv)(),a=Date.now(),i=new Date(a),l=i.toLocaleDateString(),n=i.getFullYear(),c=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],r=new Date,u=c[r.getMonth()],s=(0,t.Fl)((()=>e.state.reporte)),d=(0,t.Fl)((()=>e.state.accion.acciones)),p=(0,t.Fl)((()=>e.state.accion)),m=(0,t.Fl)((()=>e.state.producto.totalHitos)),v=(0,C.iH)(s.value.nuevoReporte.reporte_acciones[0]),_=(0,t.Fl)((()=>e.state.usuarix.usuario)),h=["Implementado","No implementado","En proceso","Pendiente","No aplicable","No cumplido"],f=(0,C.iH)(!1),b=(0,C.iH)(s.value.nuevoReporte.recomendacion),g=(0,C.iH)(0),R=(0,C.iH)(0),A=(0,C.iH)(0),w=(0,C.iH)(!1);(0,t.bv)((async()=>{await e.dispatch("accion/reqDetalleAccion",v.value.accion),e.dispatch("reporte/setNuevoReporteHito",s.value.nuevoReporte.reporte_acciones[0].reporte_hitos),e.dispatch("reporte/setNuevoReporteFuncion",s.value.nuevoReporte.reporte_acciones[0].reporte_funciones),f.value=!0}));const W=()=>{e.dispatch("accion/reqDetalleAccion",v.value.accion),e.dispatch("accion/reqFuncionesPorAccion",v.value.accion),e.dispatch("accion/reqMdvFuncionesEHitosPorAccion",v.value.accion),e.dispatch("producto/reqHitosReporte",v.value.accion),e.dispatch("reporte/setNuevoReporteHito",v.value.reporte_hitos),e.dispatch("reporte/setNuevoReporteFuncion",v.value.reporte_funciones)},y=async e=>{v.value=e},q=e=>{w.value=e},F=()=>{const a={usuario:_.value.id,actor:s.value.nuevoReporte.actor,estado:"Borrador",recomendacion:b.value,reporte_acciones:s.value.nuevoReporte.reporte_acciones};e.dispatch("reporte/postReporte",a),e.dispatch("reporte/limpiaReporteFunciones"),e.dispatch("reporte/limpiaReporteHitos"),e.dispatch("reporte/limpiaReporteAccion"),e.dispatch("reporte/reqReportesBorradores"),e.dispatch("reporte/reqReportesUpci"),o.push("panelReportesUpci")},H=async()=>{const o={usuario:_.value.id,actor:s.value.nuevoReporte.actor,estado:"Borrador",recomendacion:b.value,reporte_acciones:s.value.nuevoReporte.reporte_acciones};await e.dispatch("reporte/actalizaNuevoReporte",o),v.value=s.value.nuevoReporte.reporte_acciones[0],e.dispatch("accion/reqDetalleAccion",v.value.accion),e.dispatch("accion/reqFuncionesPorAccion",v.value.accion),e.dispatch("accion/reqMdvFuncionesEHitosPorAccion",v.value.accion),e.dispatch("producto/reqHitosReporte",v.value.accion),e.dispatch("reporte/setReporteHitosAEditar",v.value.reporte_hitos),e.dispatch("reporte/setReporteFuncionesAEditar",v.value.reporte_funciones),w.value=!1},V=()=>{const a={usuario:_.value.id,actor:s.value.nuevoReporte.actor,estado:"Borrador",recomendacion:b.value,reporte_acciones:s.value.nuevoReporte.reporte_acciones};e.dispatch("reporte/postReporte",a),e.dispatch("reporte/limpiaReporteFunciones"),e.dispatch("reporte/limpiaReporteHitos"),e.dispatch("reporte/limpiaReporteAccion"),e.dispatch("reporte/reqReportesBorradores"),e.dispatch("reporte/reqReportesUpci"),o.push("panelReportesUpci")},k=(0,C.iH)(),z=(0,C.iH)(),Z=(0,C.iH)(),Q=(0,C.iH)(!1),P=s.value.nuevoReporte.reporte_acciones;return{opciones:P,model:v,cambio:W,reporte:s,dataReady:f,cambioReporteAccion:y,finReporte:q,cambioAtras:H,guardarAvance:F,detalleProductos:m,fechaFormateada:l,stepPasoAccion:A,pasoFuncion:Q,finReporteAccion:w,stepPasoFuncion:g,stepPasoHito:R,acciones:p,totalFunciones:k,totalMDV:z,totalHito:Z,anio:n,mes:u,accionesAReportar:d,usuario:_,recomendacion:b,opcionesJustificacion:h,guardarReporte:V,getAccion:e=>{const o=p.value.detalleAccionesReporte.find((o=>o.id===e));return o.accion.id_uaysen}}}}),Ee=(0,J.Z)(De,[["render",z],["__scopeId","data-v-8821aff4"]]),Ue=Ee;te()(De,"components",{QCard:G.Z,QCardSection:O.Z,QItemLabel:Y.Z,QSeparator:K.Z,QSelect:ge.Z,QSpace:ee.Z,QInput:X.Z,QBtn:oe.Z})}}]);