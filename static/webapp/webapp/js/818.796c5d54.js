"use strict";(self["webpackChunkspci"]=self["webpackChunkspci"]||[]).push([[818],{2818:(e,a,o)=>{o.r(a),o.d(a,{default:()=>L});var i=o(83673),t=o(62323);const n={class:"q-pa-md"},l={key:0},c=(0,i._)("div",{class:"text-h6"},"¡Felicitaciones!",-1),s=(0,i._)("p",null,"Se ha actualizado el producto",-1),r={key:1},d={class:"text-h6"},u={class:"text-h6"},p={key:0},m={key:1},g={key:2},v={key:3},b=(0,i._)("div",{class:"text-h6"},"Describe la actual entrega",-1),f=(0,i._)("div",{class:"text-h6"},"Adjunta todo lo relacionado al MDV",-1),w={key:0},h=(0,i._)("div",{class:"text-weight-bold"}," Documentos subidos a Google Drive: ",-1),k={key:0},C={class:"text-grey-8 q-gutter-xs"};function q(e,a,o,q,M,_){const D=(0,i.up)("PopupCancelarNuevaEntrega"),V=(0,i.up)("q-btn"),j=(0,i.up)("q-select"),y=(0,i.up)("q-banner"),E=(0,i.up)("q-step"),W=(0,i.up)("q-input"),x=(0,i.up)("q-item-label"),P=(0,i.up)("q-item-section"),S=(0,i.up)("q-item"),Z=(0,i.up)("q-list"),A=(0,i.up)("q-separator"),Q=(0,i.up)("Picker"),U=(0,i.up)("q-stepper-navigation"),z=(0,i.up)("q-stepper");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(D,{mostrar:q.mostrarPopupCancelar,"onUpdate:mostrar":a[0]||(a[0]=e=>q.mostrarPopupCancelar=e),onRespuestaPopup:q.handlerPopupCancelar},null,8,["mostrar","onRespuestaPopup"]),q.producto.productoModificado?((0,i.wg)(),(0,i.iD)("div",l,[c,s,(0,i.Wm)(V,{label:"Ir a la bandeja de entregas",to:"bandejaEntregas",color:"primary"})])):q.entrega.aModificar?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",d," Actualizando "+(0,t.zw)(q.entrega.aModificar.entrega.descripcion),1),(0,i.Wm)(z,{modelValue:q.step,"onUpdate:modelValue":a[6]||(a[6]=e=>q.step=e),ref:"stepper",animated:"","header-class":"tablaAcciones"},{navigation:(0,i.w5)((()=>[(0,i.Wm)(U,null,{default:(0,i.w5)((()=>[3==q.step?((0,i.wg)(),(0,i.j4)(V,{key:0,onClick:q.submitEdicionProducto,color:"brown-5",label:"Finalizar",disable:!q.entrega.adjuntosEdicionEntrega},null,8,["onClick","disable"])):(0,i.kq)("",!0),q.step<3?((0,i.wg)(),(0,i.j4)(V,{key:1,onClick:a[4]||(a[4]=a=>e.$refs.stepper.next()),color:"btnContinuar",label:"Continuar",disable:!q.mdvSeleccionado},null,8,["disable"])):(0,i.kq)("",!0),q.step>1?((0,i.wg)(),(0,i.j4)(V,{key:2,flat:"",color:"btnVolver",onClick:a[5]||(a[5]=a=>e.$refs.stepper.previous()),label:"Volver",class:"q-ml-sm"})):(0,i.kq)("",!0),(0,i.Wm)(V,{color:"btnCancelar",label:"Cancelar",class:"q-ml-sm",onClick:q.clicCancelar},null,8,["onClick"])])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(E,{name:1,title:"MDV",icon:"settings",done:q.step>1,"bg-color":"blue"},{default:(0,i.w5)((()=>[(0,i._)("div",u," Seleccione un Medio de Verificación (MDV) de "+(0,t.zw)(q.entrega.aModificar.entrega.mdv.accion.id_uaysen)+" y a los hitos que cumple con esta entrega ",1),q.accion.MDVs.length?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(j,{label:"Medio de Verificación",modelValue:q.mdvSeleccionado,"onUpdate:modelValue":a[1]||(a[1]=e=>q.mdvSeleccionado=e),options:q.accion.MDVs},null,8,["modelValue","options"])])):((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)(y,{class:"bg-primary text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)(" No hay Medios de Verificación asociados a la acción "+(0,t.zw)(q.entrega.aModificar.entrega.mdv.accion.id_uaysen)+". Contacta a UPCI con los antecedentes necesarios para revisar el caso ",1)])),_:1})])),q.accion.hitos.length?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(j,{label:"Hitos","use-chips":"","stack-label":"",multiple:"",modelValue:q.hitosSeleccionados,"onUpdate:modelValue":a[2]||(a[2]=e=>q.hitosSeleccionados=e),options:q.accion.hitos,"option-value":"id","option-label":"nombre"},null,8,["modelValue","options"])])):((0,i.wg)(),(0,i.iD)("div",v,[(0,i.Wm)(y,{class:"bg-primary text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)(" No hay hitos asociados a la acción #"+(0,t.zw)(q.entrega.aModificar.id_accion)+". Contacta a UPCI para revisar el caso ",1)])),_:1})]))])),_:1},8,["done"]),(0,i.Wm)(E,{name:2,title:"Describe la entrega",caption:"Optional",icon:"create_new_folder",done:q.step>2},{default:(0,i.w5)((()=>[b,(0,i.Wm)(W,{modelValue:q.descripcionMDV,"onUpdate:modelValue":a[3]||(a[3]=e=>q.descripcionMDV=e),filled:"",type:"textarea",placeholder:"Explica los avances más importantes que se cumplen con esta entrega. Esto permitirá acelerar el proceso de revisión por parte del equipo UPCI"},null,8,["modelValue"])])),_:1},8,["done"]),(0,i.Wm)(E,{name:3,title:"Adjunta",icon:"assignment"},{default:(0,i.w5)((()=>[f,q.mdvSeleccionado?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("p",null,' Adjunta todos los documentos necesarios conformen el medio de verificación "'+(0,t.zw)(q.entrega.aModificar.entrega.mdv.nombre)+'". Éstos se subirán a Google Drive ',1),h,q.entrega.adjuntosEdicionEntrega?((0,i.wg)(),(0,i.iD)("div",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(q.entrega.adjuntosEdicionEntrega,(e=>((0,i.wg)(),(0,i.j4)(Z,{key:e.id,bordered:"",class:"rounded-borders",style:{"max-width":"600px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(S,null,{default:(0,i.w5)((()=>[(0,i.Wm)(P,{top:"",class:"col-2 gt-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{class:"q-mt-sm"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,t.zw)(e.name),1)])),_:2},1024),(0,i.Wm)(P,{top:"",side:"",align:"right"},{default:(0,i.w5)((()=>[(0,i._)("div",C,[(0,i.Wm)(V,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:a=>q.eliminarAdjunto(e)},null,8,["onClick"]),(0,i.Wm)(V,{type:"a",target:"_blank",href:e.downloadUrl,class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"download"},null,8,["href"])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])):(0,i.kq)("",!0),(0,i.Wm)(A,{color:"blue",inset:""}),(0,i.Wm)(Q,{baseDir:q.entrega.aModificar.entrega.mdv.dirGoogle},null,8,["baseDir"])])):(0,i.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])):(0,i.kq)("",!0)])}var M=o(61959),_=o(93617),D=o(28339),V=o(52556),j=o(76731),y=o(40019);const E={components:{Picker:V.Z,PopupCancelarNuevaEntrega:j.Z},setup(){const e=(0,_.oR)(),a=(0,D.tv)(),o=(0,i.Fl)((()=>e.state.entrega)),t=(0,i.Fl)((()=>e.state.producto)),n=(0,i.Fl)((()=>e.state.accion)),l=o.value.aModificar.entrega.mdv.accion.id,c=(0,i.Fl)((()=>e.state.usuarix)),s=o.value.aModificar.entrega.adjuntos,r=(0,M.iH)(o.value.aModificar.entrega.hitos),d=(0,M.iH)(!1),u=(0,M.iH)(""),p=(0,M.iH)(o.value.aModificar.entrega.mdv),m=(0,M.iH)(o.value.aModificar.entrega.descripcion),g=e=>{window.open(e.url)},v=()=>{const i={id:o.value.aModificar.entrega.id,usuario:c.value.usuario.id,mdv:p.value.id,hitos:r.value.map((e=>e.id)),descripcion:m.value,adjuntos:o.value.adjuntosEdicionEntrega};e.dispatch("entrega/setModificaProducto",i),a.push("bandejaEntregas")};return(0,i.bv)((()=>{e.dispatch("entrega/limpiaAdjuntosEdicion"),o.value.aModificar&&(e.dispatch("accion/reqMDVPorAccion",l),e.dispatch("accion/reqHitosPorAccion",l),s?e.dispatch("entrega/setAdjuntosEdicionEntrega",s):y.log("Entrega sin adjuntos"))})),{entrega:o,clickAdjunto:g,producto:t,accion:n,hitosSeleccionados:r,mdvSeleccionado:(0,M.iH)(p.value.nombre),descripcionMDV:m,mostrarPopupCancelar:d,respuestaPopupCancelar:u,eliminarAdjunto(a){e.dispatch("entrega/setAdjuntosEdicionEntrega",[a])},step:(0,M.iH)(1),handlerPopupCancelar:e=>{d.value=!1,"guarda"==e?(v(),a.push("bandejaEntregas")):"sale"==e&&a.push("bandejaEntregas")},submitEdicionProducto:v,clicCancelar:()=>{d.value=!0}}}};var W=o(74260),x=o(48240),P=o(83518),S=o(96552),Z=o(67208),A=o(15607),Q=o(34842),U=o(27011),z=o(83414),H=o(52035),I=o(2350),F=o(65869),N=o(90118),G=o(7518),R=o.n(G);const B=(0,W.Z)(E,[["render",q]]),L=B;R()(E,"components",{QBtn:x.Z,QStepper:P.Z,QStep:S.Z,QSelect:Z.Z,QBanner:A.Z,QInput:Q.Z,QList:U.Z,QItem:z.Z,QItemSection:H.Z,QItemLabel:I.Z,QSeparator:F.Z,QStepperNavigation:N.Z})}}]);