"use strict";(self["webpackChunkspci"]=self["webpackChunkspci"]||[]).push([[47],{62047:(e,a,i)=>{i.r(a),i.d(a,{default:()=>ne});var o=i(83673),n=i(62323);const l={class:"q-pa-md"},t={key:0},r=(0,o._)("div",{class:"text-h6"},"¡Felicitaciones!",-1),d=(0,o._)("p",null,"Se ha actualizado el Verificador",-1),c={key:1},s={class:"text-h6"},u={class:"text-h6"},p={class:"text-subtitle1"},m={class:"text-subtitle2"},f={class:"col"},g={class:"text-body1"},v={key:0,class:"column"},w={key:1,class:"bg-accent"},b={class:"row"},_={class:"col-4 q-ma-sm"},q={class:"text-h6"},k=(0,o._)("div",{class:"text-weight-bold"},"Fórmula",-1),h=(0,o._)("div",{class:"text-weight-bold"},"Meta",-1),W=(0,o._)("div",{class:"text-weight-bold"},"Verificador",-1),C={class:"col q-ma-sm"},j=(0,o._)("div",{class:"text-h6"},"Indique el avance del indicador",-1),y=(0,o._)("div",{class:"text-h6"},"Adjuntar el verificador",-1),x=(0,o._)("p",null," Adjunta documentos que necesites para demostrar el avance del indicador. Éstos quedarán almacenados en Google Drive y serán revisados por tu jefatura y el equipo de UPCI ",-1),V=(0,o._)("div",{class:"text-weight-bold"}," Documentos actuales en Google Drive: ",-1),D={key:0},E={class:"text-grey-8 q-gutter-xs"};function z(e,a,i,z,S,Z){const P=(0,o.up)("PopupCancelarNuevaEntrega"),M=(0,o.up)("q-btn"),Q=(0,o.up)("q-card-section"),A=(0,o.up)("q-btn-toggle"),U=(0,o.up)("q-card-actions"),H=(0,o.up)("q-card"),F=(0,o.up)("q-step"),I=(0,o.up)("q-separator"),N=(0,o.up)("q-input"),G=(0,o.up)("q-form"),K=(0,o.up)("q-item-label"),R=(0,o.up)("q-item-section"),Y=(0,o.up)("q-item"),$=(0,o.up)("q-list"),B=(0,o.up)("Picker"),L=(0,o.up)("q-stepper-navigation"),O=(0,o.up)("q-stepper");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(P,{mostrar:z.mostrarPopupCancelar,"onUpdate:mostrar":a[0]||(a[0]=e=>z.mostrarPopupCancelar=e),onRespuestaPopup:z.handlerPopupCancelar},null,8,["mostrar","onRespuestaPopup"]),z.verificador.verificadorEditado?((0,o.wg)(),(0,o.iD)("div",t,[r,d,(0,o.Wm)(M,{label:"Ir a la bandeja de entregas",to:"bandejaEntregas",color:"primary"})])):z.entrega.aModificar?((0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",s," Actualizando "+(0,n.zw)(z.entrega.aModificar.entrega.descripcion),1),(0,o.Wm)(O,{modelValue:z.step,"onUpdate:modelValue":a[7]||(a[7]=e=>z.step=e),ref:"stepper",color:"blue",animated:"","header-class":"tablaAcciones"},{navigation:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[1==z.step?((0,o.wg)(),(0,o.j4)(M,{key:0,onClick:a[4]||(a[4]=a=>e.$refs.stepper.next()),color:"btnContinuar",label:"Continuar",disable:!z.indicadorSeleccionado},null,8,["disable"])):(0,o.kq)("",!0),2==z.step?((0,o.wg)(),(0,o.j4)(M,{key:1,onClick:a[5]||(a[5]=a=>e.$refs.stepper.next()),color:"btnContinuar",label:"Continuar",disable:!z.verificadorValor||!z.verificadorDescripcion},null,8,["disable"])):(0,o.kq)("",!0),3==z.step?((0,o.wg)(),(0,o.j4)(M,{key:2,onClick:z.submitEdicionVerificador,color:"primary",label:"Finalizar",disable:!z.entrega.adjuntosEdicionEntrega},null,8,["onClick","disable"])):(0,o.kq)("",!0),z.step>1?((0,o.wg)(),(0,o.j4)(M,{key:3,flat:"",color:"btnVolver",onClick:a[6]||(a[6]=a=>e.$refs.stepper.previous()),label:"Volver",class:"q-ml-sm"})):(0,o.kq)("",!0),(0,o.Wm)(M,{color:"btnCancelar",label:"Cancelar",class:"q-ml-sm",onClick:z.clicCancelar},null,8,["onClick"])])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(F,{name:1,title:"Indicador",icon:"settings",done:z.step>1},{default:(0,o.w5)((()=>[(0,o._)("div",u," Seleccione un verificador de las siguientes funciones de "+(0,n.zw)(z.entrega.aModificar.entrega.indicador.funcion.accion.id_uaysen),1),(0,o._)("div",p,(0,n.zw)(z.entrega.aModificar.entrega.indicador.funcion.accion.titulo),1),(0,o._)("div",m," Objetivo: "+(0,n.zw)(z.entrega.aModificar.entrega.indicador.funcion.accion.objetivo),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(z.accion.funciones,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:e.id},[(0,o._)("div",f,[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{class:"q-pa-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",g,(0,n.zw)(e.nombre),1)])),_:2},1024),(0,o.Wm)(U,{vertical:""},{default:(0,o.w5)((()=>[e.indicador_set.length?((0,o.wg)(),(0,o.iD)("div",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.indicador_set,(e=>((0,o.wg)(),(0,o.j4)(A,{"no-caps":"",align:"left",class:"col",key:e.id,modelValue:z.indicadorSeleccionado,"onUpdate:modelValue":a[1]||(a[1]=e=>z.indicadorSeleccionado=e),"toggle-color":"primary",options:[{label:e.nombre,value:e}]},null,8,["modelValue","options"])))),128))])):((0,o.wg)(),(0,o.iD)("div",w," No hay indicadores definidos para esta función. Por favor, notificar este incidente a UPCI para ser revisado. Gracias "))])),_:2},1024)])),_:2},1024)])])))),128))])),_:1},8,["done"]),(0,o.Wm)(F,{name:2,title:"Detalles",icon:"assignment",done:z.step>2},{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o._)("div",_,[(0,o.Wm)(H,{flat:"",bordered:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o._)("div",q,(0,n.zw)(z.indicadorSeleccionado.nombre),1)])),_:1}),(0,o.Wm)(I,{inset:""}),(0,o.Wm)(Q,{class:"q-pt-none"},{default:(0,o.w5)((()=>[k,(0,o.Uk)(" "+(0,n.zw)(z.indicadorSeleccionado.formula),1)])),_:1}),(0,o.Wm)(Q,{class:"q-pt-none"},{default:(0,o.w5)((()=>[h,(0,o._)("div",null," actualmente: "+(0,n.zw)(z.entrega.aModificar.valor),1),(0,o.Uk)(" "+(0,n.zw)(z.indicadorSeleccionado.meta),1)])),_:1}),(0,o.Wm)(Q,{class:"q-pt-none"},{default:(0,o.w5)((()=>[W,(0,o.Uk)(" "+(0,n.zw)(z.indicadorSeleccionado.nombreVerificador),1)])),_:1})])),_:1})]),(0,o._)("div",C,[(0,o.Wm)(H,{flat:"",bordered:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[j])),_:1}),(0,o.Wm)(I,{inset:""}),(0,o.Wm)(G,{class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{filled:"",modelValue:z.verificadorValor,"onUpdate:modelValue":a[2]||(a[2]=e=>z.verificadorValor=e),label:z.indicadorSeleccionado.formula,hint:"Valor del indicador al día de hoy","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe ingresar un valor"]},null,8,["modelValue","label","rules"])])),_:1}),(0,o.Wm)(Q,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{type:"textarea",filled:"",modelValue:z.verificadorDescripcion,"onUpdate:modelValue":a[3]||(a[3]=e=>z.verificadorDescripcion=e),label:"Descripción o comentarios sobre valor indicado","lazy-rules":"",rules:[e=>e&&e.length>0||"Debe ingresar una descripción o comentario"]},(0,o.Nv)({_:2},[z.verificadorDescripcion?{name:"append",fn:(0,o.w5)((()=>[]))}:void 0]),1032,["modelValue","rules"])])),_:1})])),_:1})])),_:1})])])])),_:1},8,["done"]),(0,o.Wm)(F,{name:3,title:"Adjunta",icon:"create_new_folder"},{default:(0,o.w5)((()=>[y,x,V,z.entrega.adjuntosEdicionEntrega?((0,o.wg)(),(0,o.iD)("div",D,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(z.entrega.adjuntosEdicionEntrega,(e=>((0,o.wg)(),(0,o.j4)($,{key:e.id,bordered:"",class:"rounded-borders",style:{"max-width":"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(R,{top:"",class:"col-2 gt-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{class:"q-mt-sm"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,o.Wm)(R,{top:"",side:"",align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",E,[(0,o.Wm)(M,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:a=>z.eliminarAdjunto(e)},null,8,["onClick"]),(0,o.Wm)(M,{type:"a",target:"_blank",href:e.downloadUrl,class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"download"},null,8,["href"])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])):(0,o.kq)("",!0),(0,o.Wm)(I,{color:"blue",inset:""}),(0,o.Wm)(B,{baseDir:z.indicadorSeleccionado.dirGoogle},null,8,["baseDir"])])),_:1})])),_:1},8,["modelValue"])])):(0,o.kq)("",!0)])}var S=i(61959),Z=i(93617),P=i(28339),M=i(52556),Q=i(76731),A=i(40019);const U={components:{Picker:M.Z,PopupCancelarNuevaEntrega:Q.Z},setup(){const e=(0,P.tv)(),a=(0,Z.oR)(),i=(0,o.Fl)((()=>a.state.entrega)),n=(0,o.Fl)((()=>a.state.verificador)),l=(0,o.Fl)((()=>a.state.accion)),t=(0,o.Fl)((()=>a.state.usuarix)),r=(0,S.iH)(!1),d=(0,S.iH)(""),c=(0,S.iH)(i.value.aModificar.entrega.indicador),s=(0,S.iH)(i.value.aModificar.entrega.valor),u=(0,S.iH)(i.value.aModificar.entrega.descripcion),p=i.value.aModificar.entrega.adjuntos,m=e=>{window.open(e.url)},f=()=>{const o={id:i.value.aModificar.entrega.id,usuario:t.value.usuario.id,indicador:c.value.id,valor:s.value,descripcion:u.value,adjuntos:i.value.adjuntosEdicionEntrega};a.dispatch("entrega/setModificaVerificador",o),e.push("bandejaEntregas")};return(0,o.bv)((()=>{a.dispatch("entrega/limpiaAdjuntosEdicion"),i.value.aModificar&&(a.dispatch("accion/reqFuncionesPorAccion",i.value.aModificar.entrega.indicador.funcion.accion.id),p?a.dispatch("entrega/setAdjuntosEdicionEntrega",p):A.log("Entrega sin adjuntos"))})),{clickAdjunto:m,verificador:n,entrega:i,accion:l,indicadorSeleccionado:(0,S.iH)(),verificadorValor:s,verificadorDescripcion:u,mostrarPopupCancelar:r,respuestaPopupCancelar:d,eliminarAdjunto(e){a.dispatch("entrega/setAdjuntosEdicionEntrega",[e])},step:(0,S.iH)(1),handlerPopupCancelar:a=>{r.value=!1,"guarda"==a?(f(),e.push("bandejaEntregas")):"sale"==a&&e.push("bandejaEntregas")},submitEdicionVerificador:f,clicCancelar:()=>{r.value=!0}}}};var H=i(74260),F=i(48240),I=i(83518),N=i(96552),G=i(10151),K=i(25589),R=i(99367),Y=i(38761),$=i(65869),B=i(68689),L=i(34842),O=i(27011),T=i(83414),J=i(52035),X=i(2350),ee=i(90118),ae=i(7518),ie=i.n(ae);const oe=(0,H.Z)(U,[["render",z]]),ne=oe;ie()(U,"components",{QBtn:F.Z,QStepper:I.Z,QStep:N.Z,QCard:G.Z,QCardSection:K.Z,QCardActions:R.Z,QBtnToggle:Y.Z,QSeparator:$.Z,QForm:B.Z,QInput:L.Z,QList:O.Z,QItem:T.Z,QItemSection:J.Z,QItemLabel:X.Z,QStepperNavigation:ee.Z})}}]);