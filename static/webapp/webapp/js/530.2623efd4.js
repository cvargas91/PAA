"use strict";(self["webpackChunkspci"]=self["webpackChunkspci"]||[]).push([[530],{57530:(e,a,o)=>{o.r(a),o.d(a,{default:()=>O});var l=o(83673),i=o(62323);const n={class:"q-pa-md"},t={key:0},c=(0,l._)("div",{class:"text-h6"},"¡Felicitaciones!",-1),s=(0,l._)("p",null,"Se ha enviado el nuevo borrador al líder del equipo",-1),r=(0,l._)("div",{class:"text-h6"}," ¿Está listo tu nuevo verificador para ser revisado por el líder del equipo? ",-1),d={key:1},u=(0,l._)("div",{class:"text-h6"},"¡Felicitaciones!",-1),p=(0,l._)("p",null,"Se ha guardado el nuevo producto",-1),m={key:2},v={class:"text-h6"},g={key:0},w={key:1},b={key:2},k={key:3},h=(0,l._)("div",{class:"text-h6"},"Describe la actual entrega",-1),f=(0,l._)("div",{class:"text-h6"},"Adjunta todo lo relacionado al MDV",-1),q={key:0},_={key:0,class:"q-pa-md",style:{"max-width":"400px"}},C=(0,l._)("div",{class:"text-weight-bold"}," Documentos subidos a Google Drive: ",-1),y={class:"row justify-end"};function D(e,a,o,D,V,j){const E=(0,l.up)("PopupCancelarNuevaEntrega"),W=(0,l.up)("q-btn"),P=(0,l.up)("q-select"),A=(0,l.up)("q-banner"),S=(0,l.up)("q-step"),Z=(0,l.up)("q-input"),x=(0,l.up)("Picker"),Q=(0,l.up)("q-item-label"),H=(0,l.up)("q-item-section"),M=(0,l.up)("q-icon"),N=(0,l.up)("q-item"),U=(0,l.up)("q-list"),I=(0,l.up)("q-stepper-navigation"),z=(0,l.up)("q-stepper"),F=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(E,{mostrar:D.mostrarPopupCancelar,"onUpdate:mostrar":a[0]||(a[0]=e=>D.mostrarPopupCancelar=e),onRespuestaPopup:D.handlerPopupCancelar},null,8,["mostrar","onRespuestaPopup"]),"EnviadoAlLider"==D.entrega.estadoWorkflow?((0,l.wg)(),(0,l.iD)("div",t,[c,s,r,(0,l._)("div",null,[(0,l.Wm)(W,{label:"No no no, déjalo como borrador. Lo enviaré más tarde",class:"q-ma-sm",to:"bandejaEntregas",color:"primary"}),(0,l.Wm)(W,{class:"q-ma-sm",label:"Sí, envíalo al líder",onClick:D.enviaAlLider,color:"secondary"},null,8,["onClick"])])])):(0,l.kq)("",!0),D.producto.nuevoProducto?((0,l.wg)(),(0,l.iD)("div",d,[u,p,(0,l.Wm)(W,{label:"Ir a la bandeja de entregas",to:"bandejaEntregas",color:"primary"})])):D.entrega.nuevaEntrega?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(z,{modelValue:D.step,"onUpdate:modelValue":a[6]||(a[6]=e=>D.step=e),ref:"stepper",animated:"","header-class":"tablaAcciones"},{navigation:(0,l.w5)((()=>[(0,l.Wm)(I,{class:"tarjetaAmarilla"},{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(W,{color:"btnCancelar",label:"  Cancelar  ",class:"q-ml-sm",onClick:D.clicCancelar},null,8,["onClick"]),D.step>1?((0,l.wg)(),(0,l.j4)(W,{key:0,color:"btnVolver",onClick:a[4]||(a[4]=a=>e.$refs.stepper.previous()),label:"  Continuar ",class:"q-ml-sm"})):(0,l.kq)("",!0),D.step<3?((0,l.wg)(),(0,l.j4)(W,{key:1,onClick:a[5]||(a[5]=a=>e.$refs.stepper.next()),color:"btnContinuar",label:"  Continuar ",class:"q-ml-sm",disable:!D.mdvSeleccionado},null,8,["disable"])):(0,l.kq)("",!0),3==D.step?((0,l.wg)(),(0,l.j4)(W,{key:2,onClick:D.submitEntregable,color:"primary",label:"  Finalizar ",class:"q-ml-sm",disable:!D.entrega.adjuntosNuevaEntrega},null,8,["onClick","disable"])):(0,l.kq)("",!0)])])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(S,{name:1,title:"MDV",icon:"settings",done:D.step>1,class:"tarjetaAmarilla"},{default:(0,l.w5)((()=>[(0,l._)("div",v," Seleccione un Medio de Verificación (MDV) de "+(0,i.zw)(D.entrega.nuevaEntrega.id_uaysen)+" y a los hitos que cumple con esta entrega ",1),D.accion.MDVs.length?((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(P,{label:"Medio de Verificación",modelValue:D.mdvSeleccionado,"onUpdate:modelValue":a[1]||(a[1]=e=>D.mdvSeleccionado=e),options:D.accion.MDVs,"option-label":"nombre"},null,8,["modelValue","options"])])):((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)(A,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" No hay Medios de Verificación asociados a la acción "+(0,i.zw)(D.entrega.nuevaEntrega.id_accion)+". Contacta a UPCI con los antecedentes necesarios para revisar el caso ",1)])),_:1})])),D.accion.hitos.length?((0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)(P,{label:"Hitos","use-chips":"","stack-label":"",multiple:"",modelValue:D.hitosSeleccionados,"onUpdate:modelValue":a[2]||(a[2]=e=>D.hitosSeleccionados=e),options:D.accion.hitos,"option-value":"id","option-label":"nombre"},null,8,["modelValue","options"])])):((0,l.wg)(),(0,l.iD)("div",k,[(0,l.Wm)(A,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)(" No hay hitos asociados a la acción #"+(0,i.zw)(D.entrega.nuevaEntrega.id_accion)+". Contacta a UPCI para revisar el caso ",1)])),_:1})]))])),_:1},8,["done"]),(0,l.Wm)(S,{name:2,title:"Describe la entrega",caption:"Optional",icon:"create_new_folder",done:D.step>2,class:"tarjetaAmarilla"},{default:(0,l.w5)((()=>[h,(0,l.Wm)(Z,{modelValue:D.descripcionMDV,"onUpdate:modelValue":a[3]||(a[3]=e=>D.descripcionMDV=e),filled:"",type:"textarea",placeholder:"Explica los avances más importantes que se cumplen con esta entrega. Esto permitirá acelerar el proceso de revisión por parte del equipo UPCI"},null,8,["modelValue"])])),_:1},8,["done"]),(0,l.Wm)(S,{name:3,title:"Adjunta",icon:"assignment",class:"tarjetaAmarilla"},{default:(0,l.w5)((()=>[f,D.mdvSeleccionado?((0,l.wg)(),(0,l.iD)("div",q,[(0,l._)("p",null,' Adjunta todos los documentos necesarios conformen el medio de verificación "'+(0,i.zw)(D.mdvSeleccionado.nombre)+'". Éstos se subirán a Google Drive ',1),(0,l.Wm)(x,{baseDir:D.mdvSeleccionado.dirGoogle},null,8,["baseDir"]),D.entrega.adjuntosNuevaEntrega?((0,l.wg)(),(0,l.iD)("div",_,[C,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(D.entrega.adjuntosNuevaEntrega,(e=>((0,l.wg)(),(0,l.j4)(U,{bordered:"",key:e.id},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(N,{clickable:"",onClick:a=>D.clickAdjunto(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.name),1)])),_:2},1024),(0,l.Wm)(Q,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.type),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(H,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{color:"primary",name:"file_download"})])),_:1})])),_:2},1032,["onClick"])),[[F]])])),_:2},1024)))),128))])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])):(0,l.kq)("",!0)])}var V=o(61959),j=o(93617),E=o(79582),W=o(52556),P=o(76731);const A={components:{Picker:W.Z,PopupCancelarNuevaEntrega:P.Z},setup(){const e=(0,j.oR)(),a=(0,E.tv)(),o=(0,l.Fl)((()=>e.state.entrega)),i=(0,l.Fl)((()=>e.state.producto)),n=(0,l.Fl)((()=>e.state.accion)),t=(0,l.Fl)((()=>e.state.usuarix)),c=(0,V.iH)([]),s=(0,V.iH)([]),r=(0,V.iH)(null),d=(0,V.iH)(""),u=(0,V.iH)(0),p=(0,V.iH)(""),m=(0,V.iH)(!1),v=(0,V.iH)(""),g=e=>{window.open(e.url)},w=()=>{const a={usuario:t.value.usuario.id,mdv:r.value.id,hitos:s.value.map((e=>e.id)),descripcion:p.value,adjuntos:o.value.adjuntosNuevaEntrega};e.dispatch("producto/postProducto",a)};return(0,l.bv)((()=>{o.value.nuevaEntrega&&(e.dispatch("accion/reqMDVPorAccion",o.value.nuevaEntrega.id),e.dispatch("accion/reqHitosPorAccion",o.value.nuevaEntrega.id))})),(0,l.Ah)((()=>{e.dispatch("verificador/limpiaNuevoVerificador"),e.dispatch("producto/limpiaNuevoProducto"),e.dispatch("entrega/limpiaAdjuntos")})),{clickAdjunto:g,entrega:o,producto:i,accion:n,funciones:c,hitosSeleccionados:s,mdvSeleccionado:r,notasAdicionales:d,nivelAvance:u,descripcionMDV:p,mostrarPopupCancelar:m,respuestaPopupCancelar:v,handlerPopupCancelar:e=>{m.value=!1,"guarda"==e?(w(),a.push("acciones")):"sale"==e&&a.push("acciones")},submitEntregable:w,enviaAlLider:()=>{e.dispatch("entrega/workflowEnviaAlLider",{entrega_id:i.value.nuevoProducto.id,entrega_tipo:"producto"})},step:(0,V.iH)(1),clicCancelar:()=>{p.value?m.value=!0:a.push("acciones")}}}};var S=o(74260),Z=o(48240),x=o(83518),Q=o(96552),H=o(67208),M=o(15607),N=o(34842),U=o(27011),I=o(83414),z=o(52035),F=o(2350),L=o(24554),R=o(90118),G=o(46489),B=o(7518),$=o.n(B);const K=(0,S.Z)(A,[["render",D]]),O=K;$()(A,"components",{QBtn:Z.Z,QStepper:x.Z,QStep:Q.Z,QSelect:H.Z,QBanner:M.Z,QInput:N.Z,QList:U.Z,QItem:I.Z,QItemSection:z.Z,QItemLabel:F.Z,QIcon:L.Z,QStepperNavigation:R.Z}),$()(A,"directives",{Ripple:G.Z})}}]);