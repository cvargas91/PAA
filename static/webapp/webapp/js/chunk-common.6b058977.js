"use strict";(self["webpackChunkspci"]=self["webpackChunkspci"]||[]).push([[64],{26920:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Q});var n=t(83673),o=t(62323);const l={class:"q-gutter-y-md"},r={key:0,class:"text-subtitle1 text-textoAzul"},i={class:"q-gutter-y-md"};function c(e,a,t,c,s,u){const d=(0,n.up)("q-item-label"),p=(0,n.up)("q-item-section"),m=(0,n.up)("q-item"),g=(0,n.up)("q-select"),v=(0,n.up)("q-card-section"),b=(0,n.up)("TablaAccionesUnidad"),w=(0,n.up)("q-card");return(0,n.wg)(),(0,n.iD)("div",l,[e.seRenderea?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("b",null,"Unidad: "+(0,o.zw)(e.actor.nombre),1)])):(0,n.kq)("",!0),(0,n._)("div",i,[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,{filled:"",options:e.actores,label:"Unidades",color:"teal",clearable:"","options-selected-class":"text-deep-orange","option-label":"sigla","model-value":e.actor,"onUpdate:modelValue":e.cambio},{option:(0,n.w5)((e=>[(0,n.Wm)(m,(0,o.vs)((0,n.F4)(e.itemProps)),{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.opt.sigla),1)])),_:2},1024),(0,n.Wm)(d,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.opt.nombre),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["options","model-value","onUpdate:modelValue"])])),_:1}),e.seRenderea?((0,n.wg)(),(0,n.j4)(v,{key:0,modelValue:e.actor,"onUpdate:modelValue":a[0]||(a[0]=a=>e.actor=a)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{id_responsable:e.actor.id,acciones:e.accion.acciones},null,8,["id_responsable","acciones"])])),_:1},8,["modelValue"])):(0,n.kq)("",!0)])),_:1})])])}var s=t(61959),u=t(93617);const d={class:"q-px-sm"},p={key:0,class:"q-pa-md"},m={class:"row justify-end q-gutter-sm q-ma-md"};function g(e,a,t,o,l,r){const i=(0,n.up)("q-table"),c=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(i,{rows:e.acciones,columns:e.opciones,selection:"multiple",selected:e.accionesSeleccionadas,"onUpdate:selected":a[0]||(a[0]=a=>e.accionesSeleccionadas=a),"no-data-label":"No hay acciones para el filtro aplicado"},null,8,["rows","columns","selected"]),e.accionesSeleccionadas.length?((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("div",m,[(0,n.Wm)(c,{class:"q-ma-sm",color:"btnCancelar",label:"   Cancelar   ",onClick:a[1]||(a[1]=a=>e.accionesSeleccionadas=[])}),(0,n.Wm)(c,{class:"q-ma-sm",label:"   Reporte    ",color:"light-blue-10",onClick:e.accionBoton},null,8,["onClick"])])])):(0,n.kq)("",!0)])}var v=t(79582);const b=(0,n.aZ)({props:{acciones:Array,id_responsable:Number},setup(e){const a=(0,v.tv)(),t=(0,u.oR)(),o=e.id_responsable,l=(0,n.Fl)((()=>t.state.accion.accion)),r=(0,s.iH)([]);(0,n.bv)((()=>{t.dispatch("accion/limpiaAccionAReportar")}));const i=(0,s.iH)(["accion","titulo","tipo"]);return{accion:l,acciones:(0,s.Vh)(e,"acciones"),id_responsable:o,opciones:[{name:"accion",label:"Acción",field:e=>e.accion.id_uaysen,align:"left",sortable:!0},{name:"titulo",label:"Título",field:e=>e.accion.titulo,align:"left",style:"white-space: normal"},{name:"tipo",label:"Tipo",field:e=>e.accion.tipo,align:"left",sortable:!0}],accionesSeleccionadas:r,columnasVisibles:i,accionBoton:()=>{r.value[0].actor.id,r.value[0].accion.id;t.dispatch("accion/reqFuncionesPorAccion",r.value[0].accion.id),t.dispatch("accion/reqMdvFuncionesEHitosPorAccion",r.value[0].accion.id),t.dispatch("producto/reqHitosReporte",r.value[0].accion.id),t.dispatch("accion/setAccionesAReportar",{acciones:r.value}),a.push("reporteUpci")}}}});var w=t(74260),k=t(82138),f=t(48240),_=t(7518),h=t.n(_);const q=(0,w.Z)(b,[["render",g]]),C=q;h()(b,"components",{QTable:k.Z,QBtn:f.Z});const E=(0,n.aZ)({components:{TablaAccionesUnidad:C},setup(){const e=(0,u.oR)(),a=(0,n.Fl)((()=>e.state.actor.actores)),t=(0,n.Fl)((()=>e.state.accion)),o="Seleccione una Unidad",l=(0,s.iH)(null),r=(0,s.iH)(""),i=(0,s.iH)(null),c=(0,s.iH)(""),d=(0,s.iH)(null),p=(a,t)=>{a?(i.value=!1,e.dispatch("accion/limpiaAcciones"),e.dispatch("accion/reqAccionesPorRolResponsable",a.id),l.value=a,c.value=a.id,r.value=a.nombre,i.value=!0):(i.value=!1,l.value=o,e.dispatch("accion/limpiaAcciones"))};return(0,n.bv)((()=>{e.dispatch("actor/reqActores")})),{model:d,actor:l,actores:a,cambio:p,seRenderea:i,accion:t,id_responsable:c,detalleActor:r}}});var Z=t(10151),A=t(25589),W=t(67208),U=t(83414),D=t(52035),y=t(2350);const j=(0,w.Z)(E,[["render",c]]),Q=j;h()(E,"components",{QCard:Z.Z,QCardSection:A.Z,QSelect:W.Z,QItem:U.Z,QItemSection:D.Z,QItemLabel:y.Z})},64809:(e,a,t)=>{t.d(a,{Z:()=>f});var n=t(83673);const o={key:0,class:"text-h6 q-mb-md"},l=(0,n.Uk)(" Acción "),r=(0,n._)("b",null," Sin archivos adjuntos",-1),i=(0,n.Uk)(". "),c=[l,r,i];function s(e,a,t,l,r,i){const s=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.adjuntos?((0,n.wg)(),(0,n.iD)("div",o,c)):(0,n.kq)("",!0),e.seRenderea?((0,n.wg)(),(0,n.j4)(s,{key:1,label:e.etiqueta,color:"light-blue-10",onClick:e.accionBoton},null,8,["label","onClick"])):(0,n.kq)("",!0)],64)}var u=t(61959),d=t(93617),p=t(79582);const m=(0,n.aZ)({props:{usuario:Object,entrega:Object,tipoEntrega:String},emits:["ajuntosEntregas"],setup(e,a){let{emit:t}=a;const n=(0,d.oR)(),o=((0,p.tv)(),(0,u.iH)(!0)),l=(0,u.iH)(""),r=(0,u.iH)(""),i=(0,u.iH)(!1);return"Finalizado"==e.entrega.estado?o.value=!1:"Enviado a UPCI"==e.entrega.estado&&e.usuario.perfil.esAnalistaUPCI?(l.value="   Finalizar  ",r.value="UPCIFinaliza"):"Enviado al líder"==e.entrega.estado&&e.usuario.perfil.esEncargado?(l.value=" Enviar a UPCI ",r.value="liderEnvia"):"Borrador"==e.entrega.estado&&e.usuario.id==e.entrega.usuario.id?(l.value=" Enviar al líder ",r.value="colabEnvia"):o.value=!1,{etiqueta:l,seRenderea:o,adjuntos:i,accionBoton:()=>{switch(r.value){case"colabEnvia":e.entrega.adjuntos&&e.entrega.adjuntos.length?(i.value=!1,n.dispatch("entrega/workflowEnviaAlLider",{entrega_id:e.entrega.id,entrega_tipo:e.tipoEntrega})):(i.value=!0,o.value=!1,t("ajuntosEntregas",i.value));break;case"liderEnvia":n.dispatch("entrega/workflowLiderDaVistoBueno",{entrega_id:e.entrega.id,entrega_tipo:e.tipoEntrega});break;case"UPCIFinaliza":n.dispatch("entrega/workflowUPCIDaVistoBueno",{entrega_id:e.entrega.id,entrega_tipo:e.tipoEntrega});break}}}}});var g=t(74260),v=t(48240),b=t(7518),w=t.n(b);const k=(0,g.Z)(m,[["render",s]]),f=k;w()(m,"components",{QBtn:v.Z})},61399:(e,a,t)=>{t.d(a,{Z:()=>W});var n=t(83673);function o(e,a,t,o,l,r){const i=(0,n.up)("DescartaEntrega"),c=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(i,{entrega:e.entrega,mostrar:e.mostrarPopupDescartar,tipoEntrega:e.tipoEntrega,"onUpdate:mostrar":a[0]||(a[0]=a=>e.mostrarPopupDescartar=a)},null,8,["entrega","mostrar","tipoEntrega"]),e.seRenderea?((0,n.wg)(),(0,n.j4)(c,{key:0,label:e.etiqueta,color:"negative",onClick:e.accionBoton},null,8,["label","onClick"])):(0,n.kq)("",!0)],64)}var l=t(61959),r=t(93617),i=t(79582);const c=(0,n._)("span",{class:"q-ml-sm"},"¿Estas segur@ que deseas descartar (eliminar) la entrega?",-1),s=(0,n.Uk)(" Se eliminarán los siguientes adjuntos subidos a Google Drive: "),u=(0,n._)("ul",null,[(0,n._)("li",null,"archivos aca")],-1);function d(e,a,t,o,l,r){const i=(0,n.up)("q-avatar"),d=(0,n.up)("q-card-section"),p=(0,n.up)("q-btn"),m=(0,n.up)("q-card-actions"),g=(0,n.up)("q-card"),v=(0,n.up)("q-dialog"),b=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(v,{modelValue:o.mostrar,"onUpdate:modelValue":a[0]||(a[0]=e=>o.mostrar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"row items-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{icon:"warning",color:"primary","text-color":"white"}),c])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[s,u])),_:1}),(0,n.Wm)(m,{align:"right"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(p,{flat:"",label:"Cancelar",color:"btnCancelar"},null,512),[[b]]),(0,n.wy)((0,n.Wm)(p,{flat:"",label:"Sí, descártala",color:"primary",onClick:o.clicDescartar},null,8,["onClick"]),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const p={props:{mostrar:Boolean,entrega:Object,tipoEntrega:String},setup(e,a){let{emit:t}=a;const o=(0,r.oR)(),l=(0,n.Fl)({get:()=>e.mostrar,set:e=>t("update:mostrar",e)});return{clicDescartar:()=>{o.dispatch("entrega/workflowDescarta",{entrega_id:e.entrega.id,entrega_tipo:e.tipoEntrega})},mostrar:l}}};var m=t(74260),g=t(46778),v=t(10151),b=t(25589),w=t(75096),k=t(99367),f=t(48240),_=t(60677),h=t(7518),q=t.n(h);const C=(0,m.Z)(p,[["render",d]]),E=C;q()(p,"components",{QDialog:g.Z,QCard:v.Z,QCardSection:b.Z,QAvatar:w.Z,QCardActions:k.Z,QBtn:f.Z}),q()(p,"directives",{ClosePopup:_.Z});const Z=(0,n.aZ)({components:{DescartaEntrega:E},props:{usuario:Object,entrega:Object,tipoEntrega:String},setup(e){const a=(0,i.tv)(),t=(0,r.oR)(),n=(0,l.iH)(!0),o=(0,l.iH)(""),c=(0,l.iH)(""),s=(0,l.iH)(!1);return"Finalizado"==e.entrega.estado?n.value=!1:"Enviado a UPCI"==e.entrega.estado&&e.usuario.perfil.esAnalistaUPCI?(o.value="Rechazar",c.value="UPCIRechaza"):"Enviado al líder"==e.entrega.estado&&e.usuario.perfil.esEncargado?(o.value="Rechazar",c.value="liderRechaza"):"Borrador"==e.entrega.estado&&e.usuario.id==e.entrega.usuario.id?(o.value="Descartar",c.value="colabDescarta"):n.value=!1,{etiqueta:o,seRenderea:n,mostrarPopupDescartar:s,entrega:e.entrega,tipoEntrega:e.tipoEntrega,accionBoton:()=>{"colabDescarta"==c.value?s.value=!0:"liderRechaza"==c.value?(t.dispatch("entrega/setEntregaARechazar",{entrega:e.entrega,tipoEntrega:e.tipoEntrega,mandante:"lider"}),a.push("rechazaEntrega")):"UPCIRechaza"==c.value&&(t.dispatch("entrega/setEntregaARechazar",{entrega:e.entrega,tipoEntrega:e.tipoEntrega,mandante:"UPCI"}),a.push("rechazaEntrega"))}}}}),A=(0,m.Z)(Z,[["render",o]]),W=A;q()(Z,"components",{QBtn:f.Z})},52556:(e,a,t)=>{t.d(a,{Z:()=>g});var n=t(83673);const o={key:0},l={key:1,class:"text-h6"};function r(e,a,t,r,i,c){const s=(0,n.up)("q-btn");return r.token?((0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(s,{color:"btnAdjuntar",icon:"attach_file",label:"Adjuntar documentos",onClick:a[0]||(a[0]=e=>r.driveIconClicked())})])):((0,n.wg)(),(0,n.iD)("div",l,"Un momento por favor..."))}var i=t(93617);const c={props:{baseDir:String},setup(e){const a=(0,i.oR)(),t=(0,n.Fl)((()=>a.state.usuarix.token)),o=(0,n.Fl)((()=>a.state.entrega));var l=document.createElement("script"),r=!1;const c="AIzaSyDakTEUxGmv1YzAmFOY_a_TjLbHi0AInBQ";(0,n.bv)((()=>{a.dispatch("usuarix/reqAccessToken"),l=document.createElement("script"),l.setAttribute("type","text/javascript"),l.setAttribute("src","https://apis.google.com/js/api.js"),document.head.appendChild(l)})),(0,n.Ah)((()=>{l.remove()}));const s=async function(){gapi.load("picker",(()=>{r=!0,u()}))},u=function(){if(r&&t){new google.picker.View(google.picker.ViewId.DOCS).setParent(e.baseDir);var a=(new google.picker.DocsUploadView).setParent(e.baseDir),n=(new google.picker.PickerBuilder).setLocale("es-419").enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(a).setOAuthToken(t.value).setDeveloperKey(c).setCallback(d).build();n.setVisible(!0)}},d=async function(e){e[google.picker.Response.ACTION]===google.picker.Action.PICKED&&(o.value.aModificar?a.dispatch("entrega/setAdjuntosEdicionEntrega",e.docs):a.dispatch("entrega/setAdjuntosNuevaEntrega",e.docs)),r=!1};return{driveIconClicked:s,createPicker:u,pickerCallback:d,token:t}}};var s=t(74260),u=t(48240),d=t(7518),p=t.n(d);const m=(0,s.Z)(c,[["render",r]]),g=m;p()(c,"components",{QBtn:u.Z})},76731:(e,a,t)=>{t.d(a,{Z:()=>U});var n=t(83673);const o=(0,n._)("div",{class:"text-h6 text-textoAzul"},"¿Segur@ que quieres cancelar?",-1),l=(0,n._)("b",null," No ",-1),r=(0,n.Uk)("No quiero salir. Quiero seguir editando"),i=(0,n._)("b",null," Sí, ¡pero guarda mis avances! ",-1),c=(0,n.Uk)(' Sale y almacena el avance en una entrega de tipo "borrador" que se puede editar en '),s=(0,n._)("b",null,"Bandeja de Entregas",-1),u=(0,n._)("b",null," Sí ",-1),d=(0,n.Uk)("Sale y descarta mi avance");function p(e,a,t,p,m,g){const v=(0,n.up)("q-separator"),b=(0,n.up)("q-card-section"),w=(0,n.up)("q-icon"),k=(0,n.up)("q-item-section"),f=(0,n.up)("q-item-label"),_=(0,n.up)("q-item"),h=(0,n.up)("q-list"),q=(0,n.up)("q-card"),C=(0,n.up)("q-dialog"),E=(0,n.Q2)("ripple");return(0,n.wg)(),(0,n.j4)(C,{modelValue:p.mostrar,"onUpdate:modelValue":a[3]||(a[3]=e=>p.mostrar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[o,(0,n.Wm)(v,{spaced:""})])),_:1}),(0,n.Wm)(h,{class:"text-textoAzul"},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(_,{clickable:"",onClick:a[0]||(a[0]=e=>p.handleClick("cancelar"))},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{color:"primary",name:"edit"})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[l])),_:1}),(0,n.Wm)(f,{caption:""},{default:(0,n.w5)((()=>[r])),_:1})])),_:1})])),_:1})),[[E]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(_,{clickable:"",onClick:a[1]||(a[1]=e=>p.handleClick("guarda"))},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{color:"negative",name:"sticky_note_2"})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(f,{caption:""},{default:(0,n.w5)((()=>[c,s])),_:1})])),_:1})])),_:1})),[[E]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(_,{clickable:"",onClick:a[2]||(a[2]=e=>p.handleClick("sale"))},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{color:"secondary",name:"delete_forever"})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[u])),_:1}),(0,n.Wm)(f,{caption:""},{default:(0,n.w5)((()=>[d])),_:1})])),_:1})])),_:1})),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const m={props:{mostrar:Boolean},setup(e,a){let{emit:t}=a;const o=e=>{t("respuestaPopup",e)},l=(0,n.Fl)({get:()=>e.mostrar,set:e=>t("update:mostrar",e)});return{handleClick:o,mostrar:l}}};var g=t(74260),v=t(46778),b=t(10151),w=t(25589),k=t(65869),f=t(27011),_=t(83414),h=t(52035),q=t(24554),C=t(2350),E=t(46489),Z=t(7518),A=t.n(Z);const W=(0,g.Z)(m,[["render",p]]),U=W;A()(m,"components",{QDialog:v.Z,QCard:b.Z,QCardSection:w.Z,QSeparator:k.Z,QList:f.Z,QItem:_.Z,QItemSection:h.Z,QIcon:q.Z,QItemLabel:C.Z}),A()(m,"directives",{Ripple:E.Z})}}]);